<Frame
 CycleDuration="0.1"
 Name="Undesirable movements supervision"
 Guid="2642b6b9-4490-4bde-9b25-9e810ef03306"
>
<SubSequences>
<SubSequence
 D_LRBG=""
 Level=""
 Mode=""
 NID_LRBG=""
 Q_DIRLRBG=""
 Q_DIRTRAIN=""
 Q_DLRBG=""
 RBC_ID=""
 RBCPhone=""
 Name="Standstill supervision"
 Guid="4ee3155c-aee5-474a-b79f-392c9a80472e"
>
<TestCases>
<TestCase
 Implemented="TRUE"
 Name="Full Standstill supervision sequence"
 Guid="2efde04d-8f6c-46bd-a30f-ff2a209f86e7"
>
<ReqRef
 Id="c4a4386b-4dc3-4967-aaef-4485fe5a5adf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b55ca2df-1b19-46b2-8f9b-01e68d634edc"
>
</ReqRef><ReqRef
 Id="b883cf61-7caf-4980-becb-9096c165864d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9e9c229b-d9fc-4c99-bad9-a33c10bcf567"
>
</ReqRef><ReqRef
 Id="ade33b4f-310e-406d-b308-3be003251c25"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7d7aaceb-2bd1-4a30-957f-a1bc44daa92e"
>
</ReqRef><ReqRef
 Id="f4fbf115-c910-46e8-b6e7-bf1fb0f8a4b3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="14e1efc6-46a5-4a5e-a509-e9de1c7c4b2a"
>
</ReqRef><ReqRef
 Id="ba7f8c98-781f-404a-b7b8-e679b92c5448"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5b20b45a-6973-42eb-98f3-39389dc257ad"
>
</ReqRef><ReqRef
 Id="171a7439-f829-4c74-b166-72756245c015"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d3ebf37a-7e9b-4e10-bf4d-9b2dd95e16ab"
>
</ReqRef><Steps>
<Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step1 - Setup"
 Guid="727ea634-c8cd-47ce-9536-1c6ccb34444a"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="SubStep1"
 Guid="7db99589-80a3-45e4-b2da-9e15a88a8d5f"
>
<Actions>
<Action
 Guid="74b44265-3396-4f8c-b087-753e5bb4af0c"
>Testing.InitializeTestEnvironment
(
    aTrainPosition =&gt; 100.0,
    aMode =&gt; ModeEnum.SB
)</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="6306d123-f080-453f-9326-9377f6337521"
>Kernel.UndesirableMovement.StandstillSupervisionReferencePosition == BaseTypes.Distance.Unknown</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step2 - Detect movement"
 Guid="9c9c08cd-d0aa-48c1-886b-17545ca63d02"
>
<ReqRef
 Id="c4a4386b-4dc3-4967-aaef-4485fe5a5adf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ff543e72-3eab-48a0-81b6-7091e198a8ac"
>
</ReqRef><SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="SubStep1"
 Guid="d41c7307-eb48-47da-bd68-73f578a70f2e"
>
<Actions>
<Action
 Guid="9c7888aa-fde5-4a2e-a16a-52abd1ea7b82"
>Odometry.EstimatedSpeed &lt;- 2.0</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="f1397fae-c8f3-4e8b-aa85-0042c224f3c0"
>Kernel.UndesirableMovement.StandstillSupervisionReferencePosition == 100.0</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step3 - Apply service brake if standtill distance exceeded"
 Guid="43cc983a-a050-4be1-8f5f-c8eb6963c246"
>
<ReqRef
 Id="b883cf61-7caf-4980-becb-9096c165864d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e35f5197-8141-4559-9f7e-7f1b2002e44e"
>
</ReqRef><ReqRef
 Id="c4a4386b-4dc3-4967-aaef-4485fe5a5adf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2420b745-9957-41ff-a5f3-a7fce8afb834"
>
</ReqRef><ReqRef
 Id="ade33b4f-310e-406d-b308-3be003251c25"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0885084a-5960-4dcc-9e3d-3a1c63157374"
>
</ReqRef><SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="No brake (forward movement)"
 Guid="dd8218c8-6799-42a7-a9da-cf3e09fc9242"
>
<Actions>
<Action
 Guid="3d2d710d-1d25-498c-ac3f-598321f4a5e7"
>Odometry.NominalDistance &lt;- Kernel.UndesirableMovement.StandstillSupervisionReferencePosition + Kernel.NationalValues.ApplicableNationalValues.Value.DistToBeUsedInRollAwayProt_RevMvtProt_StandstillSup - 0.5</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="e3e17027-9d2a-4451-91a6-fd5c2e2a4aec"
>NOT Kernel.UndesirableMovement.StandstillDistanceExceeded()</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="c3e084dd-7f28-47ca-8321-09ee208c8139"
>FORALL X IN Kernel.BrakeCommands.ServiceBrakeCommands | X.Reason != Kernel.BrakeCommands.BrakeReasonEnum.SupervisingStandstill</Expectation></Expectations>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="No brake (backward movement)"
 Guid="b1824385-90ed-439e-9286-da1240a2d082"
>
<Actions>
<Action
 Guid="84306e4c-4b10-4ff7-875f-5bcbe172eed1"
>Odometry.NominalDistance &lt;- Kernel.UndesirableMovement.StandstillSupervisionReferencePosition - Kernel.NationalValues.ApplicableNationalValues.Value.DistToBeUsedInRollAwayProt_RevMvtProt_StandstillSup + 0.5</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="b8b5460f-70fd-4391-8450-9ce6c412d88a"
>NOT Kernel.UndesirableMovement.StandstillDistanceExceeded()</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="6e6694c1-c9a0-4c19-80b6-fb41ee3d02e5"
>FORALL X IN Kernel.BrakeCommands.ServiceBrakeCommands | X.Reason != Kernel.BrakeCommands.BrakeReasonEnum.SupervisingStandstill</Expectation></Expectations>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="Brake (forward movement)"
 Guid="6eba1eff-ac7c-4f80-b686-333bde320167"
>
<Actions>
<Action
 Guid="8893bfd7-ee68-4591-ae3e-67a6487d1867"
>Odometry.NominalDistance &lt;- Kernel.UndesirableMovement.StandstillSupervisionReferencePosition + Kernel.NationalValues.ApplicableNationalValues.Value.DistToBeUsedInRollAwayProt_RevMvtProt_StandstillSup + 0.1</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="bd63c139-613e-4004-9a46-f9e6cf881f88"
>Kernel.UndesirableMovement.StandstillDistanceExceeded()</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="9dc18511-373b-4180-a6f5-d892e0b77b37"
>THERE_IS X IN 
DMI.MasterDMI().Out_BrakeReason.Reasons | X.Reason == Kernel.BrakeCommands.BrakeReasonEnum.SupervisingStandstill</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="737e14e4-313a-41f9-9ec9-b8b200c1a226"
>THERE_IS X IN Kernel.BrakeCommands.ServiceBrakeCommands | X.Reason == Kernel.BrakeCommands.BrakeReasonEnum.SupervisingStandstill</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="7494ea8d-921f-4a1c-91b0-8ad5ad050e1a"
>DMI.MasterDMI().Out_BrakeReason.OutputInformation.DisplayRequested == True</Expectation></Expectations>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="Brake (backward movement)"
 Guid="42ef95a4-619a-465a-a9ea-64a581d40ed2"
>
<Actions>
<Action
 Guid="7bea0370-815b-4802-9efe-400cf0b1d5ff"
>Odometry.NominalDistance &lt;- Kernel.UndesirableMovement.StandstillSupervisionReferencePosition - Kernel.NationalValues.ApplicableNationalValues.Value.DistToBeUsedInRollAwayProt_RevMvtProt_StandstillSup - 0.1</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="f6334d04-b0ce-4760-b9ef-1c2d3ae7609c"
>Kernel.UndesirableMovement.StandstillDistanceExceeded()</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="24c9c705-b694-4035-9699-c993703260b7"
>THERE_IS X IN Kernel.BrakeCommands.ServiceBrakeCommands | X.Reason == Kernel.BrakeCommands.BrakeReasonEnum.SupervisingStandstill</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="039cab0f-939e-490e-b1a8-6e5deb47431a"
>THERE_IS X IN 
DMI.MasterDMI().Out_BrakeReason.Reasons | X.Reason == Kernel.BrakeCommands.BrakeReasonEnum.SupervisingStandstill</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="91a013e2-f9e1-4e2d-87e6-eda91656120d"
>DMI.MasterDMI().Out_BrakeReason.OutputInformation.DisplayRequested == True</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step4 - Ask for acknowledgement when at standstill"
 Guid="6b763b57-5b42-4801-ae27-90263b37a37b"
>
<ReqRef
 Id="f4fbf115-c910-46e8-b6e7-bf1fb0f8a4b3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ad6f69df-5306-473f-9249-9d628511bf36"
>
</ReqRef><ReqRef
 Id="ba7f8c98-781f-404a-b7b8-e679b92c5448"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2ae2ded8-d829-4bb6-94b3-4b184b6aeb16"
>
</ReqRef><SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Movement"
 Guid="5554892b-978d-403c-b181-f2d9481a90a7"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="3ffb51f0-d94c-499f-8a92-9d46321ea0ed"
>DMI.MasterDMI().In_AcknForStandstillSupervision.InputInformation.RequestStatus == RequestEnum.Disabled AND FORALL X IN DMI.IN.Acknowledgements.Acknowledgements | X.Type != DMI.IN.Acknowledgements.AckTypeEnum.StandstillSupervision</Expectation></Expectations>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="Standstill"
 Guid="995d2e4f-8502-4dc9-b280-3c3eebca4ffe"
>
<Actions>
<Action
 Guid="5a77afa8-af9b-46e9-8b4e-3bf0e083cb48"
>Odometry.EstimatedSpeed &lt;- 0.0</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="7497cc85-04da-44ef-84c9-0c68a8b7e89b"
>DMI.MasterDMI().In_AcknForStandstillSupervision.InputInformation.RequestStatus != RequestEnum.Disabled OR THERE_IS X IN DMI.IN.Acknowledgements.Acknowledgements | X.Type == DMI.IN.Acknowledgements.AckTypeEnum.StandstillSupervision</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step5 - Release brake when acknowledgement is received"
 Guid="b7f86715-4ea9-435b-88bd-e59da0a86185"
>
<ReqRef
 Id="ba7f8c98-781f-404a-b7b8-e679b92c5448"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5515bd21-ba5b-47b0-8d33-4c13fdc8aa2c"
>
</ReqRef><ReqRef
 Id="f4fbf115-c910-46e8-b6e7-bf1fb0f8a4b3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="90c2f8cd-ff8b-4007-a422-da3bdb08ed7d"
>
</ReqRef><SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="No acknowledgement"
 Guid="b5628e11-4643-4717-8f52-cfb87005d45f"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="551030e0-ad68-4b05-af7b-010a0bb5fbf8"
>THERE_IS X IN Kernel.BrakeCommands.ServiceBrakeCommands | X.Reason == Kernel.BrakeCommands.BrakeReasonEnum.SupervisingStandstill</Expectation></Expectations>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="Acknowledgement received"
 Guid="0f7e102c-19b1-4910-a8b0-7fbd8ab9d0fc"
>
<Actions>
<Action
 Guid="323623f0-8b30-4ffe-a1d3-8c716a8863b0"
>DMI.MasterDMI().In_AcknForStandstillSupervision.InputInformation.DriverAnswered &lt;- True</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="e6d0b9e8-7727-4848-875c-71dc052d0196"
>FORALL X IN Kernel.BrakeCommands.ServiceBrakeCommands | X.Reason != Kernel.BrakeCommands.BrakeReasonEnum.SupervisingStandstill</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="5706af90-6856-49bd-b4d2-cb5310b2c2b0"
>DMI.MasterDMI().Out_BrakeReason.OutputInformation.DisplayRequested == False</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase></TestCases>
</SubSequence><SubSequence
 D_LRBG=""
 Level=""
 Mode=""
 NID_LRBG=""
 Q_DIRLRBG=""
 Q_DIRTRAIN=""
 Q_DLRBG=""
 RBC_ID=""
 RBCPhone=""
 Name="Reverse movement protection"
 Guid="08332ac5-ea96-44a8-b6dc-fc5319dd1718"
>
<TestCases>
<TestCase
 Name="Full reverse movement protection"
 Guid="fa05a0f1-aa2a-4c66-9771-e56e4ee63237"
>
<Steps>
<Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step1 - Setup"
 Guid="f8da3132-054e-4f59-ac8a-184b7473aec9"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="SubStep1"
 Guid="76b9c38e-86c5-45e9-999f-b8cb3710bd2b"
>
<Actions>
<Action
 Guid="8fd4a42a-5bc5-4ad6-8244-47d2fbdd90fd"
>Testing.InitializeTestEnvironment
(
    aTrainPosition =&gt; 100.0,
    aMode =&gt; ModeEnum.FS
)</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="8b6482df-02a3-4935-83b8-4375bb1e46b5"
>Kernel.UndesirableMovement.ReverseMovementReferencePosition == BaseTypes.Distance.Unknown</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step2 - Moves and updates reference position"
 Guid="30e9edd6-2d5a-458d-9fdc-41cfebdb05fd"
>
<SubSteps>
<SubStep
 Name="SubStep1"
 Guid="d12524d4-0022-48bf-9aa5-b73369ded83a"
>
<Actions>
<Action
 Guid="feb86ed6-e181-4b69-9849-c9c40f1e7a25"
>Odometry.EstimatedSpeed &lt;- 1.0</Action><Action
 Guid="36c52631-873b-4d27-9261-d523aaf529a5"
>Odometry.NominalDistance &lt;- 110.0</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="92a8823b-37ae-4d3d-80f0-3b9aebf4c66e"
>Kernel.UndesirableMovement.ReverseMovementReferencePosition == 110.0</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step3 - Detect reverse movement"
 Guid="9a22277b-7ebf-4119-beda-ea7a6688423c"
>
<SubSteps>
<SubStep
 Name="SubStep1"
 Guid="7840927d-0653-4034-ac65-4210a99c9025"
>
<Comment>No update of reference position in reverse movement.</Comment>
<Actions>
<Action
 Guid="191b66ee-c942-464a-9f99-8e93897a4779"
>Odometry.NominalDistance &lt;- Odometry.NominalDistance - 0.5 * Kernel.NationalValues.ApplicableNationalValues.Value.DistToBeUsedInRollAwayProt_RevMvtProt_StandstillSup</Action><Action
 Guid="81d82d82-ff70-4233-8f44-35ae4fba7c31"
>Odometry.EstimatedSpeed &lt;-  -1.0</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="e5fa2a79-4056-4d8b-86f6-58dbdf9ce2e0"
>Kernel.UndesirableMovement.ReverseMovementReferencePosition == 110.0</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step4 - Do not accept balise message while in reverse movement"
 Guid="6e6c517a-ddcb-4d74-8ea7-9ce75464301d"
>
<SubSteps>
<SubStep
 Name="SubStep1"
 Guid="fec75c30-f297-447b-aa84-3eb800ef397e"
>
<Actions>
<Action
 Guid="b116ebeb-0df5-4263-9bf7-ee9b4aaf1366"
>BTM.Message.SystemVersion1 &lt;- Messages.SystemVersion1.EUROBALISE.Message
{
  Q_UPDOWN =&gt; 0, 
  M_VERSION =&gt; 0, 
  Q_MEDIA =&gt; 0, 
  N_PIG =&gt; 0, 
  N_TOTAL =&gt; 0, 
  M_DUP =&gt; 0, 
  M_MCOUNT =&gt; 0, 
  NID_C =&gt; 0, 
  NID_BG =&gt; 0, 
  Q_LINK =&gt; 0, 
  Sequence1 =&gt; [Messages.SystemVersion1.EUROBALISE.SubStructure1
    {
      TRACK_TO_TRAIN =&gt; Messages.SystemVersion1.PACKET.TRACK_TO_TRAIN.Message
      {
        GEOGRAPHICAL_POSITION_INFORMATION =&gt; EMPTY, 
        SYSTEM_VERSION_ORDER =&gt; EMPTY, 
        NATIONAL_VALUES =&gt; EMPTY, 
        LINKING =&gt; EMPTY, 
        VIRTUAL_BALISE_COVER_ORDER =&gt; EMPTY, 
        LEVEL_1_MOVEMENT_AUTHORITY =&gt; EMPTY, 
        LEVEL_2_3_MOVEMENT_AUTHORITY =&gt; EMPTY, 
        REPOSITIONING_INFORMATION =&gt; EMPTY, 
        GRADIENT_PROFILE =&gt; EMPTY, 
        INTERNATIONAL_STATIC_SPEED_PROFILE =&gt; EMPTY, 
        TRACK_CONDITION_CHANGE_OF_TRACTION_SYSTEM =&gt; EMPTY, 
        LEVEL_TRANSITION_ORDER =&gt; EMPTY, 
        SESSION_MANAGEMENT =&gt; EMPTY, 
        DATA_USED_BY_APPLICATIONS_OUTSIDE_THE_ERTMS_ETCS_SYSTEM =&gt; EMPTY, 
        RADIO_NETWORK_REGISTRATION =&gt; EMPTY, 
        CONDITIONAL_LEVEL_TRANSITION_ORDER =&gt; EMPTY, 
        LIST_OF_BALISES_FOR_SH_AREA =&gt; EMPTY, 
        AXLE_LOAD_SPEED_PROFILE =&gt; EMPTY, 
        MOVEMENT_AUTHORITY_REQUEST_PARAMETERS =&gt; EMPTY, 
        POSITION_REPORT_PARAMETERS =&gt; EMPTY, 
        LIST_OF_BALISES_IN_SR_AUTHORITY =&gt; EMPTY, 
        TEMPORARY_SPEED_RESTRICTION =&gt; EMPTY, 
        TEMPORARY_SPEED_RESTRICTION_REVOCATION =&gt; EMPTY, 
        TRACK_CONDITION_BIG_METAL_MASSES =&gt; EMPTY, 
        TRACK_CONDITION =&gt; EMPTY, 
        ROUTE_SUITABILITY_DATA =&gt; EMPTY, 
        ADHESION_FACTOR =&gt; EMPTY, 
        PACKET_FOR_SENDING_PLAIN_TEXT_MESSAGES =&gt; EMPTY, 
        MODE_PROFILE =&gt; EMPTY, 
        TRACK_AHEAD_FREE_UP_TO_LEVEL_2_3_TRANSITION_LOCATION =&gt; EMPTY, 
        RBC_TRANSITION_ORDER =&gt; EMPTY, 
        DANGER_FOR_SHUNTING_INFORMATION =&gt; EMPTY, 
        RADIO_INFILL_AREA_INFORMATION =&gt; EMPTY, 
        EOLM_PACKET =&gt; EMPTY, 
        STOP_SHUNTING_ON_DESK_OPENING =&gt; EMPTY, 
        INFILL_LOCATION_REFERENCE =&gt; EMPTY, 
        STOP_IF_IN_STAFF_RESPONSIBLE =&gt; EMPTY, 
        REVERSING_AREA_INFORMATION =&gt; EMPTY, 
        REVERSING_SUPERVISION_INFORMATION =&gt; EMPTY, 
        TRAIN_RUNNING_NUMBER_FROM_RBC =&gt; EMPTY, 
        DEFAULT_GRADIENT_FOR_TEMPORARY_SPEED_RESTRICTION =&gt; EMPTY, 
        INHIBITION_OF_BALISE_GROUP_MESSAGE_CONSISTENCY_REACTION =&gt; EMPTY, 
        VIRTUAL_BALISE_COVER_MARKER =&gt; Messages.SystemVersion1.PACKET.TRACK_TO_TRAIN.VIRTUAL_BALISE_COVER_MARKER.Message
        {
          NID_PACKET =&gt; 200, 
          NID_VBCMK =&gt; 0, 
          Q_DIR =&gt; 0, 
          L_PACKET =&gt; 0
        }, 
        NATIONAL_VALUES_FOR_BRAKING_CURVES =&gt; EMPTY, 
        TRACK_CONDITION_BL3 =&gt; EMPTY, 
        ROUTE_SUITABILITY_DATA_BL3 =&gt; EMPTY, 
        TRACK_CONDITION_CHANGE_OF_TRACTION_SYSTEM_BL3 =&gt; EMPTY, 
        DEFAULT_BALISE_LOOP_OR_RIU_INFORMATION =&gt; EMPTY, 
        BitField =&gt; &apos;&apos;
      }
    }, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY], 
  BitField =&gt; &apos;&apos;
}</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="5ba78802-ec07-4795-8812-bd406ceac1ce"
>BTM.CurrentBaliseGroup == []</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step5 - Do not exceed reverse distance and keep going in the right direction"
 Guid="8b7d4d10-58c2-4859-a10b-160789fd2821"
>
<SubSteps>
<SubStep
 Name="SubStep1"
 Guid="e3331931-396d-4310-acde-f1a1bd5d0055"
>
<Actions>
<Action
 Guid="7ee19936-dd3f-4e18-ba22-7fc622b0d9e7"
>Odometry.NominalDistance &lt;- 115.0</Action><Action
 Guid="8c03d96b-2e31-4fac-a587-5ae51e20b8d4"
>Odometry.EstimatedSpeed &lt;- 1.0</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="eb3a250d-5ac6-4f09-9e7f-4e4e37c147c6"
>Kernel.UndesirableMovement.ReverseMovementReferencePosition == 115.0</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step6 - Detect reverse movement"
 Guid="98c8a62d-9e60-4eb8-b4d7-eefa3e5c4130"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="SubStep1"
 Guid="ad066f6b-ac1c-4381-9b2d-f6daba62b636"
>
<Comment>No update of reference position in reverse movement.</Comment>
<Actions>
<Action
 Guid="84ad7343-e0e7-46f9-a096-5662a21f3d1a"
>Odometry.NominalDistance &lt;- Odometry.NominalDistance - 0.5 * Kernel.NationalValues.ApplicableNationalValues.Value.DistToBeUsedInRollAwayProt_RevMvtProt_StandstillSup</Action><Action
 Guid="f5f7a29f-2d63-4195-90f2-2d2f93d1a580"
>Odometry.EstimatedSpeed &lt;-  -1.0</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="9cd21a76-c99e-4c40-bfdb-056fcac05a8a"
>Kernel.UndesirableMovement.ReverseMovementReferencePosition == 115.0</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step7 - Apply brakes if distance exceeded"
 Guid="5798c4f3-d3eb-497b-93c1-b1fae2ec0211"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="SubStep1"
 Guid="f8bb1731-7360-4b97-819f-c6af3626c19f"
>
<Comment>No update of reference position in reverse movement.</Comment>
<Actions>
<Action
 Guid="8140403b-ebdb-4a08-890e-a1761ed54938"
>Odometry.NominalDistance &lt;- Odometry.NominalDistance -Kernel.NationalValues.ApplicableNationalValues.Value.DistToBeUsedInRollAwayProt_RevMvtProt_StandstillSup</Action><Action
 Guid="806380ae-e56e-40fa-9641-b2379e100b22"
>Odometry.EstimatedSpeed &lt;-  -1.0</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="163e70ca-f5c7-4ef7-af7e-95b90b3945d9"
>Kernel.UndesirableMovement.ReverseMovementReferencePosition == 115.0</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="d6a5615c-8592-4020-a2ca-0138760c5f03"
>Kernel.UndesirableMovement.ReverseDistanceExceeded()</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="0a5b1d14-4059-4d5f-87ed-a124b6e8834b"
>THERE_IS X IN 
DMI.MasterDMI().Out_BrakeReason.Reasons | X.Reason == Kernel.BrakeCommands.BrakeReasonEnum.ReverseMovementProtection</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="cd3eeb1d-6859-4b7b-b657-1a2e8a1f5c85"
>THERE_IS X IN Kernel.BrakeCommands.ServiceBrakeCommands | X.Reason == Kernel.BrakeCommands.BrakeReasonEnum.ReverseMovementProtection</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="63e7fe17-2b21-4db1-9946-0d0424a452af"
>DMI.MasterDMI().Out_BrakeReason.OutputInformation.DisplayRequested == True</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step8 - Ask for acknowledgement when at standstill"
 Guid="79ad7edd-b229-4d32-9d20-ca84124e9c5d"
>
<ReqRef
 Id="f4fbf115-c910-46e8-b6e7-bf1fb0f8a4b3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="942ab2d7-71cf-4420-a915-02ca6fb9e321"
>
</ReqRef><ReqRef
 Id="ba7f8c98-781f-404a-b7b8-e679b92c5448"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8444d53a-1c99-46de-813a-6c64f1948579"
>
</ReqRef><SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Movement"
 Guid="4a2096c9-95b2-4f5a-93b8-e78373733627"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="abeff9e1-bf29-466b-8248-76ba620fe649"
>DMI.MasterDMI().In_AcknForReverseMovementProtection.InputInformation.RequestStatus == RequestEnum.Disabled AND FORALL X IN DMI.IN.Acknowledgements.Acknowledgements | X.Type != DMI.IN.Acknowledgements.AckTypeEnum.ReverseMovementProtection</Expectation></Expectations>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="Standstill"
 Guid="ae056919-267a-42bf-a53d-f1e8b0ee735b"
>
<Actions>
<Action
 Guid="a04bc0ed-73b5-43da-9a56-c82d0480749f"
>Odometry.EstimatedSpeed &lt;- 0.0</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="91ead035-a522-4ccf-b0dd-2d0dd8d95c74"
>DMI.MasterDMI().In_AcknForReverseMovementProtection.InputInformation.RequestStatus != RequestEnum.Disabled OR THERE_IS X IN DMI.IN.Acknowledgements.Acknowledgements | X.Type == DMI.IN.Acknowledgements.AckTypeEnum.ReverseMovementProtection</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Step9 - Release brake when acknowledgement is received"
 Guid="43976a1b-3c87-4ed1-9e14-11c0d8908540"
>
<ReqRef
 Id="ba7f8c98-781f-404a-b7b8-e679b92c5448"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7e52c5ff-37e2-407c-b832-c32ce34e75bc"
>
</ReqRef><ReqRef
 Id="f4fbf115-c910-46e8-b6e7-bf1fb0f8a4b3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7212b2e3-3797-4541-bcd6-b59e3be97b71"
>
</ReqRef><SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="No acknowledgement"
 Guid="e5e49e4f-1eb7-44d5-aa3f-1f4a451257fb"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="4882b28f-ad8e-44df-904f-d64470c2a2f0"
>THERE_IS X IN Kernel.BrakeCommands.ServiceBrakeCommands | X.Reason == Kernel.BrakeCommands.BrakeReasonEnum.ReverseMovementProtection</Expectation></Expectations>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="Acknowledgement received"
 Guid="7b8184e6-1b30-49bc-961f-975e2c67a832"
>
<Actions>
<Action
 Guid="627330f2-836d-4b40-a615-adbc522afefa"
>DMI.MasterDMI().In_AcknForReverseMovementProtection.InputInformation.DriverAnswered &lt;- True</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="d0382a9a-9d66-4619-b821-2d3409a239a8"
>FORALL X IN Kernel.BrakeCommands.ServiceBrakeCommands | X.Reason != Kernel.BrakeCommands.BrakeReasonEnum.ReverseMovementProtection</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="dabb2d27-acca-4f67-8b4d-41820cf87792"
>DMI.MasterDMI().Out_BrakeReason.OutputInformation.DisplayRequested == False</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="c10b9641-a86d-42be-897e-0d702438e26f"
>Odometry.NominalDistance == Kernel.UndesirableMovement.ReverseMovementReferencePosition</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase></TestCases>
</SubSequence></SubSequences>
</Frame>
