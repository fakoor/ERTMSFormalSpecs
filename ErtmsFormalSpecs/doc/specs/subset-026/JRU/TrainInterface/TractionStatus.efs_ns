<NameSpace
 X="150"
 Y="80"
 Width="100"
 Height="50"
 Name="TractionStatus"
 Guid="99830495-86cd-48f5-a56b-0e08823b0cdc"
>
<Comment>Definition of the JRU message &quot;TRACTION STATUS&quot;, and functions to fetch all the information needed for this message.</Comment>
<NameSpaces>
</NameSpaces>
<Functions>
<Function
 Type="Boolean"
 Default=""
 X="40"
 Y="30"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SendMessage"
 Guid="8db5797c-a0ea-46ef-82f6-53a034950db4"
>
<ReqRef
 Id="e394f9dd-0990-4f2d-ac8d-9a045f765d0a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="4a2a58da-b2ad-40c7-aa34-dd8afc99ce34"
>
</ReqRef><ReqRef
 Id="1d116569-0a84-49db-b43b-fc79a8237b40"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="439044d6-6402-40cd-b55c-adb84c77beff"
>
</ReqRef><Comment>Indicates whether the TRACTION_STATUS JRU Message should be sent</Comment>
<Cases>
<Case
 Name="AtStartUp"
 Guid="5d6a8db1-aff9-456a-8d68-0552f368edf3"
>
<PreConditions>
<PreCondition
 Guid="e72c8da4-9736-4f15-9369-50f70bb41644"
>IsStartUp()</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="TractionStatusChanged"
 Guid="46cbc9e8-ba67-494d-a335-39d9414ec957"
>
<Expression>LastStatus != GetStatus()</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_TRACTION_STATUS"
 Default=""
 X="150"
 Y="30"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="GetStatus"
 Guid="63d93c89-3831-458e-919d-106b76f33941"
>
<ReqRef
 Id="2fa2f9ae-31ff-4ea3-af52-c0dffbbdbef1"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="da3e7763-63a3-49f6-8bc7-c97f64bd9e79"
>
</ReqRef><ReqRef
 Id="1d116569-0a84-49db-b43b-fc79a8237b40"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="37a4c2d0-ae60-4b5a-a3e5-9039e9303486"
>
</ReqRef><Comment>Provides the M_TRACTION_STATUS from the TIU</Comment>
<Cases>
<Case
 Name="On"
 Guid="201e881e-3b3c-492c-97bf-33b3c48a45ac"
>
<PreConditions>
<PreCondition
 Guid="077e9f0c-c1f3-468c-9d3c-c1e98193cd03"
>TIU.TractionIsOn</PreCondition></PreConditions>
<Expression>Messages.JRU.M_TRACTION_STATUS.On</Expression>
</Case><Case
 Name="Off"
 Guid="2c045ce2-e758-4427-951b-3a4a1a6e7aab"
>
<Expression>Messages.JRU.M_TRACTION_STATUS.Off</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="40"
 Y="330"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="UpdateLastValues"
 Guid="ae170567-d1a5-429f-ad4d-4893aecc549d"
>
<ReqRef
 Id="1d116569-0a84-49db-b43b-fc79a8237b40"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="53a43eaf-f455-4ebd-9e29-e8d849f7744c"
>
</ReqRef><Comment>Updates the registered values</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update registered values"
 Guid="161548a0-01cf-49d1-a9d9-59f4506cd88f"
>
<Comment>Updates the registered values</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Update registered values"
 Guid="8a207db2-346b-4bf1-baf8-6be4e356a5d1"
>
<PreConditions>
<PreCondition
 Guid="bda89a08-2220-44a4-816b-ef459add53a2"
>SendMessage()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="020aec33-248b-4ddf-8823-e401c9c9e48e"
>LastStatus &lt;- GetStatus()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="40"
 Y="90"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FillData"
 Guid="82ad6e7a-f614-4048-97f5-fde9acdbc25d"
>
<ReqRef
 Id="8244b69a-230d-41b4-b7bb-0890ff2ccc7b"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="f8f8b284-14bd-44e6-9f69-2ba0937e48ab"
>
</ReqRef><ReqRef
 Id="0e50796d-ed4d-4c9d-a0c4-f0fdd76ce124"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="1422ae94-b8d3-48c1-bcca-0a804ed3f264"
>
</ReqRef><ReqRef
 Id="2fa2f9ae-31ff-4ea3-af52-c0dffbbdbef1"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="747b787f-5b6f-4f57-b6e5-9a4596fe339c"
>
</ReqRef><ReqRef
 Id="62733358-3780-4cb6-ba99-4d4916118140"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="16e16b1d-23eb-4bec-a7e7-baa63e464ef4"
>
</ReqRef><Comment>Creates a new TRACTION_CUT_OFF_COMMAND_STATE message, if required</Comment>
<Rules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Send TRACTION_CUT_OFF_COMMAND_STATE message"
 Guid="b7547300-0061-4818-9d4a-efedb89a8d95"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Send TRACTION_CUT_OFF_COMMAND_STATE message"
 Guid="7deae405-8a84-4e0b-9377-df1fed9638e9"
>
<PreConditions>
<PreCondition
 Guid="c30513e0-1f62-401c-8fa1-ce5ef34c42c0"
>SendMessage()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ead0d3e9-49e8-4ac8-b1f4-8227a58610ee"
>INSERT Messages.JRU.MESSAGE.Message {
     TRACTION_STATUS=&gt; Messages.JRU.MESSAGE.TRACTION_STATUS.Message {
         HEADER =&gt; JRU.Header.CreateHeader(40),
         M_TRACTION_STATUS=&gt;GetStatus() 
    } 
} IN Messages</Action><Action
 Guid="8558494c-f84f-4543-9b26-58b4b8fb5df4"
>UpdateLastValues()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="Messages.JRU.M_TRACTION_STATUS"
 DefaultValue="Messages.JRU.M_TRACTION_STATUS.Off"
 VariableMode="Internal"
 X="40"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="LastStatus"
 Guid="e4bf2ff7-fbee-4290-9408-b5ca962ce1cb"
>
<ReqRef
 Id="1d116569-0a84-49db-b43b-fc79a8237b40"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="5c654afb-0730-4b07-bb98-c369e3bbe458"
>
</ReqRef><Comment>The last reported status</Comment>
</Variable></Variables>
</NameSpace>
