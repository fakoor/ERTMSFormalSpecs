<NameSpace
 X="40"
 Y="20"
 Width="100"
 Height="50"
 Name="CabStatus"
 Guid="cef5189c-d479-43d0-bbe1-34592e4a6c19"
>
<NameSpaces>
</NameSpaces>
<Functions>
<Function
 Type="Boolean"
 Default=""
 X="40"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SendMessage"
 Guid="bd5a7101-101b-4236-93d4-08fa993777af"
>
<ReqRef
 Id="8c425848-9e3f-47e1-b085-05409ddc4922"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="7b36daa5-a976-4219-8b2c-9099540d9589"
>
</ReqRef><ReqRef
 Id="e394f9dd-0990-4f2d-ac8d-9a045f765d0a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="97de8fe4-57f1-4004-bd65-bbf169a0b833"
>
</ReqRef><Comment>Indicates whether the JRU CAB_STATUS Message should be sent</Comment>
<Cases>
<Case
 Name="AtStartUp"
 Guid="af9f5f1a-11a8-4ab7-a381-968cc8f00c9e"
>
<PreConditions>
<PreCondition
 Guid="baeb5c55-560e-42e1-9839-a845bf3ec653"
>IsStartUp()</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="Cabs status has changed"
 Guid="54073494-a6de-4a5a-bae0-e48894e4dff8"
>
<Expression>LastCabAActive != GetCabAActive() OR LastCabBActive != GetCabBActive()</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.Q_CAB_B"
 Default=""
 X="260"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SecondCabIsPresent"
 Guid="d601fc2a-debc-4465-b83d-844a21df6859"
>
<ReqRef
 Id="ca6de985-daf9-4798-87b8-e36f3b143ed7"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="4c18ba81-7db1-4617-adaa-0ec6b64d4b90"
>
</ReqRef><Comment>Determines if there is a second Cab connected to the ERTMS/ETCS System</Comment>
<Cases>
<Case
 Name="ThereIsSecondCab"
 Guid="6a05d015-021d-4fad-8846-458dc53c5836"
>
<PreConditions>
<PreCondition
 Guid="41ba2efc-5b9d-4610-87af-7fbb7b1e6c63"
>Available( TIU.CabB )</PreCondition></PreConditions>
<Expression>Messages.JRU.Q_CAB_B.Yes</Expression>
</Case><Case
 Name="SecondCabIsNotPresent"
 Guid="54213d09-e8e9-464e-8566-cb063b71ee61"
>
<Expression>Messages.JRU.Q_CAB_B.No</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_CAB_A_STATUS"
 Default=""
 X="150"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="GetCabAStatus"
 Guid="e8d8931f-0f5c-462a-adfc-e10277523b9c"
>
<ReqRef
 Id="f9a025a0-5d6b-4d68-946b-f3f5c736adc2"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="c6d28cf9-90c2-44d0-a46c-5f21f3fb9185"
>
</ReqRef><Comment>Function which will convert the input value into JRU M_CAB_A_STATUS</Comment>
<Cases>
<Case
 Name="IsActive"
 Guid="2437f156-18f3-488d-b937-3d4c56613215"
>
<PreConditions>
<PreCondition
 Guid="5a376e46-689d-4304-9c50-bf707cab94a4"
>GetCabAActive()</PreCondition></PreConditions>
<Expression>Messages.JRU.M_CAB_A_STATUS.Active</Expression>
</Case><Case
 Name="Otherwise"
 Guid="380bf9ec-3a61-453b-bc04-83142ae0562c"
>
<Expression>Messages.JRU.M_CAB_A_STATUS.Not_active</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_CAB_A_STATUS"
 Default=""
 X="260"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="GetCabBStatus"
 Guid="3b2f61a5-f6d2-4dc2-9d46-4fda55042cf8"
>
<ReqRef
 Id="45287456-663d-411a-82b3-093ef23e2fd9"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="fbc385b9-8cc5-4dee-bfc4-66984d8d1eec"
>
</ReqRef><Comment>Function which will convert the input value into JRU M_CAB_B_STATUS</Comment>
<Cases>
<Case
 Name="IsActive"
 Guid="18dd4a19-f852-4372-84d7-c55b8d1986f2"
>
<PreConditions>
<PreCondition
 Guid="9073efc4-9fb1-4956-a234-b6908f284a54"
>GetCabBActive()</PreCondition></PreConditions>
<Expression>Messages.JRU.M_CAB_B_STATUS.Active</Expression>
</Case><Case
 Name="Otherwise"
 Guid="875a1c04-d684-4646-ac29-d740fb6c9712"
>
<Expression>Messages.JRU.M_CAB_B_STATUS.Not_active</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="40"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FillData"
 Guid="27e3455f-9605-48a7-b631-0fd686452d15"
>
<ReqRef
 Id="7275722c-79c3-4be4-aa59-792d2628c3ac"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="6ca38d15-bacd-4ecd-9136-c69c50f4356e"
>
</ReqRef><ReqRef
 Id="4f390dd5-f5ce-4d60-8ed1-fde51a48b37d"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="6a1c7779-f9b0-4606-aa79-22d672cc1f16"
>
</ReqRef><ReqRef
 Id="07639a9d-c6ea-4946-b1c8-3fffb617f1bb"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="161ecdd2-c87e-4d37-9127-6d31c049e025"
>
</ReqRef><ReqRef
 Id="09df2c37-ada9-4078-a318-636e1ef17601"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="8c7cca14-bd55-4ca8-bc58-0e8e31ee0ae8"
>
</ReqRef><ReqRef
 Id="f9a025a0-5d6b-4d68-946b-f3f5c736adc2"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="6735cd78-23f7-413f-a30d-d78f16a23de7"
>
</ReqRef><ReqRef
 Id="ca6de985-daf9-4798-87b8-e36f3b143ed7"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="ae06c745-6d18-4b56-9638-1d8a7f5e6729"
>
</ReqRef><ReqRef
 Id="45287456-663d-411a-82b3-093ef23e2fd9"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="3534bda0-e53b-4fda-a3ee-7c16358894ec"
>
</ReqRef><ReqRef
 Id="51f3449f-8379-4046-bc2b-6d3a30d48f11"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="d5460142-5b72-404a-bab3-3c65014cdf20"
>
</ReqRef><Comment>Creates a new CAB_STATUS message, if required</Comment>
<Rules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Send CAB_STATUS message"
 Guid="29460cf0-50a5-4a8d-816f-1f60f350cc13"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Send CAB_STATUS message"
 Guid="03aaa63c-a397-4775-b76a-58131cd9bca5"
>
<PreConditions>
<PreCondition
 Guid="6e4730d2-4201-4c0a-9af4-eead7903458f"
>SendMessage()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a4959ca1-cc65-4934-98c1-815596842a4a"
>INSERT Messages.JRU.MESSAGE.Message {
     CAB_STATUS =&gt; Messages.JRU.MESSAGE.CAB_STATUS.Message {
         HEADER =&gt; Header.CreateHeader(38),
         M_CAB_A_STATUS =&gt; GetCabAStatus(),
         Q_CAB_B =&gt; TrainInterface.CabStatus.SecondCabIsPresent(),
         M_CAB_B_STATUS =&gt; GetCabBStatus() 
    } 
} IN Messages</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
</NameSpace>
