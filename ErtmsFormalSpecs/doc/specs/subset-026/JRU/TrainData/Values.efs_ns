<NameSpace
 X="40"
 Y="20"
 Width="100"
 Height="50"
 Name="Values"
 Guid="c20a0beb-a03f-4c76-9011-3a7c39777e4f"
>
<NameSpaces>
<NameSpaceRef
 Name="BrakesConfiguration"
 Guid="69d7bcee-688f-4d8f-9870-b61906564257"
>
</NameSpaceRef></NameSpaces>
<Structures>
<Structure
 Default=""
 X="150"
 Y="250"
 Width="100"
 Height="50"
 Name="BrakesConfigurationStruct"
 Guid="69e89d6d-15da-4f69-b513-c8edbf60a9bc"
>
<ReqRef
 Id="8623ab63-7b21-4ea0-8ae5-1f6cbb90a9b5"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="c79c5305-d4ef-4af4-9fd9-79036fd4eec7"
>
</ReqRef><Comment>A specific brakes configuration to evaluate</Comment>
<StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Name="EddyCurrentBrakesUsed"
 Guid="4fb2aa97-69aa-48d4-8a06-e41a88c338e3"
>
<Comment>Indicates whether the Eddy Current brakes are considered</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Name="RegenerativeBrakesUsed"
 Guid="f8b04e52-969b-4503-b869-cb2ba4a0b6ad"
>
<Comment>Indicates whether the Regenerative brakes are considered</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Name="MagneticShoeBrakesUsed"
 Guid="4ad7dd69-80c0-4fbc-8fcc-c6efe61ad095"
>
<Comment>Indicates whether the Magnetic shoe brakes are considered</Comment>
</StructureElement></Structure></Structures>
<Functions>
<Function
 Type="Messages.JRU.MESSAGE.TRAIN_DATA.Message"
 Default=""
 X="150"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="CreateMessage"
 Guid="64a9ed0a-2fd4-4fac-8013-c98a74c72536"
>
<ReqRef
 Id="8623ab63-7b21-4ea0-8ae5-1f6cbb90a9b5"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="945fe66f-e6c5-45a5-bd12-4c4779088cfa"
>
</ReqRef><ReqRef
 Id="9988fed6-030e-46c5-bc1b-f0cf5b8f3543"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="a9ac1b59-8a10-46fe-bbf5-b84f3cdf10a1"
>
</ReqRef><ReqRef
 Id="81ac6c57-2fb0-47df-8ad3-2a6cb88b8af1"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="7831e33c-6d83-483e-be6a-5d590d7bbee8"
>
</ReqRef><ReqRef
 Id="3d1802a3-5497-4db2-a943-202965c29421"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="c85f0857-a3fe-4901-9d0c-b394ac7131a6"
>
</ReqRef><ReqRef
 Id="8200d54e-d157-4b9a-b050-aa147d0fa939"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="0aa326de-2323-42c2-b584-9ab152f424e7"
>
</ReqRef><ReqRef
 Id="d3bda0c7-97a3-4a4b-a1de-8e694953eb3d"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="29d29e9d-8904-4171-a4a9-52ddf629a3a8"
>
</ReqRef><ReqRef
 Id="2b523498-4c29-482c-b698-a5f37aeb9812"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="9da967b7-28c6-486e-a075-bb1ac2e74734"
>
</ReqRef><ReqRef
 Id="223d5049-935f-4eda-9fbe-88cfcf309eb2"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="bd9ac02d-af94-4a9b-adb0-e47ee7fb2705"
>
</ReqRef><ReqRef
 Id="e436e8a4-9fce-4fc0-8083-1ecff0fb881e"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="0710ebbd-7991-49ef-9899-5db34ca03f1b"
>
</ReqRef><ReqRef
 Id="45cbef68-7973-4da2-9ad4-27f760d5a67f"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="554b387d-b12c-4210-98cd-c5aed4acb134"
>
</ReqRef><ReqRef
 Id="d973b24c-fef0-4dd2-a313-cece1b4f7dca"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="ffaf6087-9fc4-478f-8352-7cd39b00a95d"
>
</ReqRef><ReqRef
 Id="879e2b9e-d58d-43d1-adc8-c1fe5778e80b"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="1f11d390-01ff-4963-abd4-2d360cfb4e4d"
>
</ReqRef><ReqRef
 Id="c5b26d13-d547-4d89-9011-6a7aae1a74eb"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="d01b6123-a48d-4902-aab4-e8681246da2a"
>
</ReqRef><ReqRef
 Id="ff072fc9-7dfe-44c3-a827-dad988874775"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="40c86772-99e0-475d-999b-5474ba8e7e03"
>
</ReqRef><ReqRef
 Id="971218b4-b6bb-4751-854f-ebb6d604c176"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="5c530d1d-a882-4996-8b73-87043ebd84e1"
>
</ReqRef><ReqRef
 Id="e40f7505-d893-412e-aa27-68a5a1d23afb"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="f2d3c37c-7faf-4d07-9b53-39486e0f8ce1"
>
</ReqRef><ReqRef
 Id="bb7926e1-4192-47aa-b8a8-2f1c20b82b8a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="882df97f-cd7e-47d8-a11d-70f916271982"
>
</ReqRef><ReqRef
 Id="1eaa9674-4bce-4d3e-ae28-70a5e58efee3"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="a981cfc2-35a0-4756-9d4d-235969e3f77c"
>
</ReqRef><ReqRef
 Id="470482d0-3a61-48ea-bca5-edd507f330f1"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="ce3dd90f-2ffe-419b-94f7-d54e4062222e"
>
</ReqRef><ReqRef
 Id="abe0f66f-fa68-49a7-8865-94f4697926f3"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="820fac9a-1b35-49a9-882e-5f00aba7e213"
>
</ReqRef><ReqRef
 Id="87775fe5-602e-4587-9e19-69183cf61658"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="08e0578c-8201-4c94-bf89-a4e3e25750fc"
>
</ReqRef><ReqRef
 Id="32617ffc-0e47-494e-a52e-4b8c24f76a70"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="887b7e32-619c-4986-ad57-346db66fd89f"
>
</ReqRef><ReqRef
 Id="5626b0f1-9f44-4fed-bba1-8625f5e5bba6"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="31299422-6675-4024-96ae-6569948111a3"
>
</ReqRef><ReqRef
 Id="6ca2081f-851e-4751-9012-480e458845de"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="8e9f51cb-9654-4ba2-9948-9de78a6273ec"
>
</ReqRef><ReqRef
 Id="359b754c-597d-4321-9f37-f39af8241fe0"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="302a8752-72c3-434a-a426-fbc269b48573"
>
</ReqRef><ReqRef
 Id="bbf425ee-35fa-4076-81f6-dafb8bed41fa"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="996ffe50-b806-4d1c-9c6d-4d0d04564263"
>
</ReqRef><ReqRef
 Id="11f2dc0e-7509-4c6c-8ca0-1b6323fb41e5"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="ef0e4ee9-b320-4ca3-a2c9-25bff827fce5"
>
</ReqRef><ReqRef
 Id="58c86228-d16a-4611-b62e-2608428d9cda"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="939dc566-09e3-48df-8fbe-2d0d18c9984d"
>
</ReqRef><ReqRef
 Id="8172cda0-e56b-47ad-8ab5-4a3a919262f5"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="9deb63f8-f6cb-4a39-b9da-44973e9c85b3"
>
</ReqRef><ReqRef
 Id="cdae853e-99ef-4221-afea-a431d90a7062"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="3dff5afe-5152-4f67-9f29-51b9eb39c232"
>
</ReqRef><ReqRef
 Id="53d8ce5f-17b9-4ab7-a9cf-1f35476af1ec"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="8f352744-0e44-4873-8384-480f75c09a82"
>
</ReqRef><ReqRef
 Id="aed3787e-59d5-4500-92f0-674ad7997248"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="70c076aa-2b4f-4c90-a053-b54ccb26340e"
>
</ReqRef><ReqRef
 Id="01afe5d0-5e38-46a6-8884-e10f53aa1253"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="e1383327-65ab-4ccc-9cd2-fcf121d07027"
>
</ReqRef><ReqRef
 Id="b640d1cd-5e2f-4e98-ae46-aa5375410ac2"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="50bdfd5b-8aa1-46c9-8e9b-f261f36bb34f"
>
</ReqRef><ReqRef
 Id="a1bfa3e4-5afd-4845-a414-ec001070d6ed"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="cf254604-0340-4e98-beb2-8b4b2e8910b4"
>
</ReqRef><ReqRef
 Id="f0428811-caf7-4af4-8ff2-b9401f752e09"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="fe0765fa-791a-4a41-b757-2724dfb37cf4"
>
</ReqRef><ReqRef
 Id="ad471f0f-fd27-4b9e-8adb-215c85aabdde"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="be8e7ffe-f266-4443-829e-90891e41a82b"
>
</ReqRef><ReqRef
 Id="077785a4-136d-415e-ad35-538260ce5ad4"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="6c9fff05-983f-4646-b359-0102ac4f8ffa"
>
</ReqRef><ReqRef
 Id="c0eec423-f803-41b3-88a7-a6033904d934"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="cf47880d-28a0-483d-b961-b89e2434312b"
>
</ReqRef><ReqRef
 Id="72034d91-121e-4f2c-b022-55267bba924b"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="e0d46a4f-0d35-4968-8bf4-82ae4a4ee924"
>
</ReqRef><ReqRef
 Id="f7e574d7-ddae-478f-8b38-5aa84197c757"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="93f3fd02-2fe7-49ff-affc-8c731c0befe0"
>
</ReqRef><ReqRef
 Id="011f3ab5-fe0c-4a15-9831-1cd7e9d19749"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="ed6706b7-96e5-4ed1-ba64-ae8dcae810ff"
>
</ReqRef><ReqRef
 Id="a44c7e61-5457-48e7-8639-df22379baaf4"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="679360c4-6361-4ad7-be28-69585984d521"
>
</ReqRef><ReqRef
 Id="ec3ebba0-095a-46dd-b27f-5c3ca4036a12"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="7c38eeee-56a8-4351-84e6-e1a00dc5b1c6"
>
</ReqRef><ReqRef
 Id="21839d70-37b9-4b54-a32f-6c027fe0cc2e"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="791bfdd7-0002-442b-8be6-3c10b7afbb18"
>
</ReqRef><ReqRef
 Id="1bb3c340-c410-40e6-880c-bc30ee78df20"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="177db20e-452c-4cac-82ff-1b8b2630a674"
>
</ReqRef><ReqRef
 Id="34976712-9ffa-472c-8977-ca68e6aff10b"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="0f4eedd0-3af2-4477-a08b-55a6e395744e"
>
</ReqRef><Comment>Create the TrainData JRU Messages</Comment>
<Cases>
<Case
 Name="Value"
 Guid="85511fe5-eca8-424c-912c-81356d0d5acc"
>
<Expression>Messages.JRU.MESSAGE.TRAIN_DATA.Message{
HEADER =&gt; JRU.Header.CreateHeader(2),
 V_MAXTRAIN =&gt; MessageTypes.UnResolveSpeed ( speed =&gt; Kernel.TrainData.TrainData.Value.MaximumSpeed, resolution =&gt; 5.0 ),
 NC_CDTRAIN =&gt;  Kernel.TrainData.TrainData.Value.TrainCategories.CantDeficiency,
 M_LOADINGGAUGE =&gt;  Kernel.TrainData.TrainData.Value.LoadingGauge,
 N_AXLE =&gt;  Kernel.TrainData.TrainData.Value.AxleNumber,
 M_AXLELOADCAT =&gt;  Kernel.TrainData.TrainData.Value.AxleLoadCategory, 
L_TRAIN =&gt; MessageTypes.UnScaleLength ( length =&gt; Kernel.TrainData.TrainData.Value.TrainLength, scale =&gt; Messages.Q_SCALE._1_m_scaleC ),
 T_TRACTION_CUT_OFF=&gt; DoubleToInteger(Kernel.TrainData.BrakingParameters.T_traction_cut_off(aNoA_est =&gt; False) ),
 M_BRAKE_POSITION =&gt; ToJRUMBrakePosition(Kernel.TrainData.TrainData.Value.BrakePosition),
 M_NOM_ROT_MASS =&gt; ToJRUNomRotMass( Kernel.TrainData.TrainData.Value.M_rotating_nom ),
 M_REGENERATIVEBRAKE =&gt; ToJRUMRegenerativeBrake( Kernel.TrainData.TrainData.Value.RegenerativeBrakeInterface ),
 M_EDDYCURRENTBRAKE =&gt; ToJRUMEddyCurrentBrake(Kernel.TrainData.TrainData.Value.EddyCurrentBrakeInterface ),
 M_MAGNETICSHOEBRAKE =&gt; ToJRUMMagneticShoeBrake(Kernel.TrainData.TrainData.Value.MagneticShoeBrakeInterface ),
 M_ELECTROPNEUMATICBRAKE =&gt; ToJRUEPBrake( Kernel.TrainData.TrainData.Value.EpBrakeInterface  ),
 Q_TRACTIONCUTOFFINTERFACE =&gt; ToJRUQ_TractionCutOffFunction(Kernel.TrainData.TrainData.Value.TractionCutOffInterfaceIsImplemented),
 Q_SERVICEBRAKEINTERFACE =&gt;ToJRUQ_ServiceBrakeInterface( Kernel.TrainData.TrainData.Value.SBCommandIsImplemented ),
 Q_SERVICEBRAKEFEEDBACK =&gt; ToJRUQ_ServiceBrakeFeedback(Kernel.TrainData.TrainData.Value.SBFeedbackIsImplemented),
Q_BRAKE_CAPT_TYPE =&gt; ToJRUQ_BrakeCaptType(),
M_BRAKE_PERCENTAGE =&gt; ToJRUBrakePercentage(Kernel.TrainData.TrainData.Value.BrakePercentage),
N_BRAKE_CONF_0 =&gt; COUNT BrakeLambdaConf IN CreateSequence1(),
Sequence1 =&gt; CreateSequence1(),
N_BRAKE_CONF_1 =&gt; COUNT BrakeLambdaConf IN CreateSequence4(),
Sequence4 =&gt; CreateSequence4(),
N_ITER_0 =&gt; COUNT tractionSystem IN CreateSequence5(),
Sequence5 =&gt; CreateSequence5(),
N_ITER_1 =&gt; COUNT nationalSystem IN CreateSequence6(),
Sequence6 =&gt; CreateSequence6(),
M_AIRTIGHT =&gt; ToJRUMAirTight(Kernel.TrainData.TrainData.Value.TrainFittedWithAirtightSystem)
}</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_BRAKE_PERCENTAGE"
 Default=""
 X="260"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUBrakePercentage"
 Guid="fdf103a8-6c40-4c9f-95db-036c64d0c424"
>
<Comment>Function which will convert the input value into a JRU M_BRAKE_PERCENTAGE</Comment>
<Parameters>
<Parameter
 Type="Percentage"
 Name="BrakePercentageInKernel"
 Guid="b9f5b753-8273-40ce-b0cf-e6a64a511c51"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="General"
 Guid="fddb6790-9dd4-4be3-b203-3f454ee06cfb"
>
<PreConditions>
<PreCondition
 Guid="d8d59594-7f6a-4de8-a7f1-27810ccdf1a6"
>BrakePercentageInKernel != Percentage.NA</PreCondition></PreConditions>
<Expression>DoubleToInteger(BrakePercentageInKernel)</Expression>
</Case><Case
 Name="Otherwise"
 Guid="3aed6d42-6bf6-4680-8a14-8badc343d195"
>
<Expression>0</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_REGENERATIVEBRAKE"
 Default=""
 X="370"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUEPBrake"
 Guid="bcf16c9d-413e-4feb-885e-d2bfe65dcd3d"
>
<ReqRef
 Id="011f3ab5-fe0c-4a15-9831-1cd7e9d19749"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="4a8affdc-1fbf-43ad-8784-73b70d946705"
>
</ReqRef><Comment>Function which will convert the input value into JRU M_REGENERATIVEBRAKE</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum"
 Name="MEpInKernel"
 Guid="f21256bb-b76f-4d05-97bb-db1ddcd99e81"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Both"
 Guid="bd38aa09-4be0-4fc1-9eb4-2f29fd827c6e"
>
<PreConditions>
<PreCondition
 Guid="eba0fc43-5fbb-4c67-95c1-7fb646167594"
>MEpInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.Both</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_EB_and_SB</Expression>
</Case><Case
 Name="EB"
 Guid="ee67d532-132e-4f58-bb0e-130e8ea093dc"
>
<PreConditions>
<PreCondition
 Guid="343c0c1c-7c94-42b5-9baf-3cb10b20455d"
>MEpInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.EB</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_only_EB</Expression>
</Case><Case
 Name="SB"
 Guid="87dbea84-00c9-46ce-88fb-72051235af02"
>
<PreConditions>
<PreCondition
 Guid="c18ba683-1e51-4fd4-84e0-c8a649dc71d1"
>MEpInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.SB</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_only_SB</Expression>
</Case><Case
 Name="NoInterface"
 Guid="81d02bd5-05b7-45b6-8539-dabe463f4eea"
>
<PreConditions>
<PreCondition
 Guid="62d49921-beb4-40dc-a007-aa6f306ad994"
>MEpInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.NoInterface</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.No_interface</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_AIRTIGHT"
 Default=""
 X="480"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUMAirTight"
 Guid="bc323093-18f9-46b6-8495-93b97cf3e5db"
>
<Comment>Function which will convert the input value into JRU M_AIRTIGHT</Comment>
<Parameters>
<Parameter
 Type="Boolean"
 Name="AirTightInKernel"
 Guid="9c457d4e-67ac-47e7-8fd4-1be6b0c323ea"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Fitted"
 Guid="e4ac5855-038c-4e7e-9a54-7cd30eb992ee"
>
<PreConditions>
<PreCondition
 Guid="045286d7-344c-4478-99cd-b4bcadab0fe4"
>AirTightInKernel == True</PreCondition></PreConditions>
<Expression>Messages.JRU.M_AIRTIGHT.Fitted</Expression>
</Case><Case
 Name="NotFitted"
 Guid="2420a8e5-46b8-4e4f-bbc5-689d2651cb7d"
>
<PreConditions>
<PreCondition
 Guid="03542cff-1896-4a45-a0f7-cc149cffa915"
>AirTightInKernel == False</PreCondition></PreConditions>
<Expression>Messages.JRU.M_AIRTIGHT.Not_fitted</Expression>
</Case><Case
 Name="UnKnown"
 Guid="de4bfd09-e417-404b-a426-352252c8a090"
>
<Expression>Messages.JRU.M_AIRTIGHT.Unknown</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_BRAKE_POSITION"
 Default=""
 X="590"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUMBrakePosition"
 Guid="f7d5ccb4-af61-4d38-92e6-218eec1a01d9"
>
<ReqRef
 Id="ad471f0f-fd27-4b9e-8adb-215c85aabdde"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="fb96dc0e-29cc-45b8-8e08-072ad2c9a7db"
>
</ReqRef><Comment>Function which will convert the input value into JRU M_BRAKE_POSITION</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.BrakePositionsEnum"
 Name="BrakePositionInKernel"
 Guid="f98fdbee-c2d1-4aca-a1c9-d473449935fb"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Freight_train_in_G"
 Guid="fdf5f4dc-2e6c-4aea-9faa-fc1bce11015d"
>
<PreConditions>
<PreCondition
 Guid="ead3d26b-6f9e-4e21-8bfa-e0747ff98156"
>BrakePositionInKernel == Kernel.TrainData.BrakingParameters.BrakePositionsEnum.FreightTrainInG</PreCondition></PreConditions>
<Expression>Messages.JRU.M_BRAKE_POSITION.Freight_train_in_G</Expression>
</Case><Case
 Name="Freight_train_in_P"
 Guid="d1b2984e-6cfa-464d-8fd7-e333b27aa6be"
>
<PreConditions>
<PreCondition
 Guid="8ea4f890-f68d-4cda-b114-b70970f1f3af"
>Kernel.TrainData.BrakingParameters.BrakePositionsEnum.FreightTrainInP == BrakePositionInKernel</PreCondition></PreConditions>
<Expression>Messages.JRU.M_BRAKE_POSITION.Freight_train_in_P</Expression>
</Case><Case
 Name="Passenger_train_in_P"
 Guid="88e39381-e323-44f7-a162-471d62edbe52"
>
<PreConditions>
<PreCondition
 Guid="963a2da0-45ae-4096-96fa-d211f5379a9e"
>Kernel.TrainData.BrakingParameters.BrakePositionsEnum.PassengerTrainInP == BrakePositionInKernel</PreCondition></PreConditions>
<Expression>Messages.JRU.M_BRAKE_POSITION.Passenger_train_in_P</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_EDDYCURRENTBRAKE"
 Default=""
 X="260"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUMEddyCurrentBrake"
 Guid="b4cde76f-4ff9-4040-a3f5-3050645ee462"
>
<ReqRef
 Id="72034d91-121e-4f2c-b022-55267bba924b"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="21d362de-db6d-4b4c-a85c-1c5468c7ac8f"
>
</ReqRef><Comment>Function which will convert the input value into JRU M_EDDYCURRENTBRAKE</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum"
 Name="MEddyCurrentBrakeInKernel"
 Guid="862df1cf-d190-4236-adf8-ba71432336cf"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Both"
 Guid="288ad06d-9614-4ea0-bd56-d61f9d929d5e"
>
<PreConditions>
<PreCondition
 Guid="c7ab8525-acdd-43a6-a387-532bacde5bd6"
>MEddyCurrentBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.Both</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_EB_and_SB</Expression>
</Case><Case
 Name="EB"
 Guid="7e806717-77f9-4e64-b243-45834a316121"
>
<PreConditions>
<PreCondition
 Guid="03bd3d7e-4bda-4411-ba3d-664b32a6fe36"
>MEddyCurrentBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.EB</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_only_EB</Expression>
</Case><Case
 Name="SB"
 Guid="906b46fd-0ed7-4b25-b0ce-e7de73613662"
>
<PreConditions>
<PreCondition
 Guid="f10ab531-70b0-465a-969c-103884a026f4"
>MEddyCurrentBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.SB</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_only_SB</Expression>
</Case><Case
 Name="NoInterface"
 Guid="9a90ae8c-d770-4209-bf2f-08119ea260b0"
>
<PreConditions>
<PreCondition
 Guid="4dbc93b9-6d18-42a2-83b7-54315e8e3686"
>MEddyCurrentBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.NoInterface</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.No_interface</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_MAGNETICSHOEBRAKE"
 Default=""
 X="370"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUMMagneticShoeBrake"
 Guid="aa709ea3-3337-432f-9e05-08effee920ca"
>
<ReqRef
 Id="f7e574d7-ddae-478f-8b38-5aa84197c757"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="f609aced-528f-4698-b484-7522434a1fec"
>
</ReqRef><Comment>Function which will convert the input value into JRU M_MAGNETICSHOEBRAKE</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum"
 Name="MMagneticShoeBrakeInKernel"
 Guid="594e1618-483c-47fe-afb6-3a640c78b39a"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Both"
 Guid="0a4aaff6-413d-4c2b-a5f4-1b48124b7e4f"
>
<PreConditions>
<PreCondition
 Guid="afbf495f-1207-4e95-9d8c-7f93c898e256"
>MMagneticShoeBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.Both</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_EB_and_SB</Expression>
</Case><Case
 Name="EB"
 Guid="1dade122-8deb-4c14-9470-de40b12e8792"
>
<PreConditions>
<PreCondition
 Guid="f902e8d0-ebb2-48d0-9cd4-8b23fd526299"
>MMagneticShoeBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.EB</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_only_EB</Expression>
</Case><Case
 Name="SB"
 Guid="ecb05baf-edb0-4c0f-9a7e-5e091d8b1e29"
>
<PreConditions>
<PreCondition
 Guid="aefac506-8b66-48c5-829e-876c18a397b7"
>MMagneticShoeBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.SB</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_only_SB</Expression>
</Case><Case
 Name="NoInterface"
 Guid="aa4622cf-190b-4915-841e-3c1130ad463b"
>
<PreConditions>
<PreCondition
 Guid="a325016d-606c-421d-8ad1-d6c289e5a5bd"
>MMagneticShoeBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.NoInterface</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.No_interface</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_REGENERATIVEBRAKE"
 Default=""
 X="480"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUMRegenerativeBrake"
 Guid="e9d9d25b-778d-412a-8047-8ff6bdf4928d"
>
<ReqRef
 Id="c0eec423-f803-41b3-88a7-a6033904d934"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="dda7e3b4-91cc-4d45-9d28-3b7e50d70336"
>
</ReqRef><Comment>Function which will convert the input value into JRU M_REGENERATIVEBRAKE</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum"
 Name="MRegenerativeBrakeInKernel"
 Guid="523d964f-f881-4dab-b324-97112292a21a"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Both"
 Guid="22e9058f-b394-4abc-946d-e784106945ad"
>
<PreConditions>
<PreCondition
 Guid="5e5187a9-9738-40ef-8c69-49fcced73fc5"
>MRegenerativeBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.Both</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_EB_and_SB</Expression>
</Case><Case
 Name="EB"
 Guid="811c9445-6ace-43d9-bcf5-01a5691480b7"
>
<PreConditions>
<PreCondition
 Guid="895f1c27-606b-464a-8127-97e2995f9464"
>MRegenerativeBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.EB</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_only_EB</Expression>
</Case><Case
 Name="SB"
 Guid="03111b0b-7830-408e-bec6-f37fa1afb1b0"
>
<PreConditions>
<PreCondition
 Guid="554e1497-fabe-4246-9c79-b4834ad18371"
>MRegenerativeBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.SB</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.Interface_existis_and_affects_only_SB</Expression>
</Case><Case
 Name="NoInterface"
 Guid="f7bcb6aa-78b5-4fea-998f-8dd1322b9f36"
>
<PreConditions>
<PreCondition
 Guid="cb39315c-9f6d-48cb-87ef-a102e23ff3a1"
>MRegenerativeBrakeInKernel == Kernel.TrainData.BrakingParameters.BrakeInterfaceStatusEnum.NoInterface</PreCondition></PreConditions>
<Expression>Messages.JRU.M_REGENERATIVEBRAKE.No_interface</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_NOM_ROT_MASS"
 Default=""
 X="590"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUNomRotMass"
 Guid="f6f16c52-28b4-41ba-b2fe-e59b4499933c"
>
<ReqRef
 Id="077785a4-136d-415e-ad35-538260ce5ad4"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="953c48da-7013-4b7e-8129-24e280465386"
>
</ReqRef><Comment>Function which will convert the input value into JRU M_NOM_ROT_MASS</Comment>
<Parameters>
<Parameter
 Type="Percentage"
 Name="M_nom_rot_mass_in_kernel"
 Guid="1de9be59-09d5-4a12-8e57-eedf2e852280"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="General"
 Guid="46a02cb1-3258-46a2-8f76-8e67b972c15f"
>
<PreConditions>
<PreCondition
 Guid="23f2f8c3-5ad5-40fd-ba58-076ad058c521"
>M_nom_rot_mass_in_kernel != Percentage.NA</PreCondition></PreConditions>
<Expression>DoubleToInteger(M_nom_rot_mass_in_kernel)</Expression>
</Case><Case
 Name="NA"
 Guid="e17ff2f5-2928-46bc-b5e3-a3e8028573a5"
>
<Expression>16</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.Q_BRAKE_CAPT_TYPE"
 Default=""
 X="260"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUQ_BrakeCaptType"
 Guid="1c16d414-bbf4-44ff-b5b2-9dd798b66e23"
>
<Comment>Function which will convert the input value into JRU Q_BRAKE_CAPT_TYPE</Comment>
<Cases>
<Case
 Name="Lambda"
 Guid="47372e4b-f63a-4abe-a11b-19576ee0780c"
>
<PreConditions>
<PreCondition
 Guid="9a07de87-bda1-4f5c-9569-ba2fdb6a0325"
>Kernel.TrainData.BrakingParameters.ConversionModel.ConversionModelIsUsed() == True</PreCondition></PreConditions>
<Expression>Messages.JRU.Q_BRAKE_CAPT_TYPE.Lambda_type__the_brake_percentages_is_acquired_as_Train_Data_and_the_conversion_model_is_applicable</Expression>
</Case><Case
 Name="Gamma"
 Guid="be2d360f-d328-456e-b179-60d22368e150"
>
<PreConditions>
<PreCondition
 Guid="8ee30a8a-d3b2-42ba-9bb5-76afbf30e4ca"
>Kernel.TrainData.BrakingParameters.ConversionModel.ConversionModelIsUsed() == False</PreCondition></PreConditions>
<Expression>Messages.JRU.Q_BRAKE_CAPT_TYPE.gamma_type__all_other_captures</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.Q_SERVICEBRAKEFEEDBACK"
 Default=""
 X="370"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUQ_ServiceBrakeFeedback"
 Guid="4cf5c53e-fac9-4e0d-aa5e-43cd726f7e93"
>
<ReqRef
 Id="21839d70-37b9-4b54-a32f-6c027fe0cc2e"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="093d884f-0ba4-4006-8389-21d18ae1abf9"
>
</ReqRef><Comment>Function which will convert the input value into JRU Q_SERVICEBRAKEFEEDBACK</Comment>
<Parameters>
<Parameter
 Type="Boolean"
 Name="ServiceBrakeFeedBackInKernel"
 Guid="a4d11f6c-d189-4ebf-8a47-360da065ced2"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="IsImplemented"
 Guid="76efc085-a134-4593-b1e0-1d8e74a0823f"
>
<PreConditions>
<PreCondition
 Guid="02e33835-36f1-42aa-ad5c-475c04fa7196"
>ServiceBrakeFeedBackInKernel == True</PreCondition></PreConditions>
<Expression>1</Expression>
</Case><Case
 Name="NotImplemented"
 Guid="1a7ecf40-6b86-40bb-acf1-1c64b31e0d31"
>
<PreConditions>
<PreCondition
 Guid="c172788d-5524-4149-af94-c7b06a929d98"
>ServiceBrakeFeedBackInKernel == False</PreCondition></PreConditions>
<Expression>0</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.Q_SERVICEBRAKEINTERFACE"
 Default=""
 X="480"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUQ_ServiceBrakeInterface"
 Guid="330293ec-ddb2-4a92-91f6-4334f4f74e31"
>
<ReqRef
 Id="ec3ebba0-095a-46dd-b27f-5c3ca4036a12"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="5924fd12-2eaf-403b-966c-9ee0d07e28a3"
>
</ReqRef><Comment>Function which will convert the input value into JRU Q_SERVICEBRAKEINTERFACE</Comment>
<Parameters>
<Parameter
 Type="Boolean"
 Name="ServiceBrakeInterfaceInKernel"
 Guid="203a1688-6f86-49b0-9811-8b27ae88bc74"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="IsImplemented"
 Guid="0574b139-ba0e-4a67-b03a-5340bbf40083"
>
<PreConditions>
<PreCondition
 Guid="57330326-e78c-4f09-b06c-6f8e6151b670"
>ServiceBrakeInterfaceInKernel == True</PreCondition></PreConditions>
<Expression>1</Expression>
</Case><Case
 Name="NotImplemented"
 Guid="992b4ca2-ccd4-4194-b742-150716633d9e"
>
<PreConditions>
<PreCondition
 Guid="6fb4f53d-6235-4bce-bba2-02a2fbb344ec"
>ServiceBrakeInterfaceInKernel == False</PreCondition></PreConditions>
<Expression>0</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.Q_TRACTIONCUTOFFINTERFACE"
 Default=""
 X="590"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ToJRUQ_TractionCutOffFunction"
 Guid="4f915fca-9450-4f26-88f0-ad03bc4294a9"
>
<ReqRef
 Id="f0428811-caf7-4af4-8ff2-b9401f752e09"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="72876e04-7433-4fdc-a840-9d6c3d70cfca"
>
</ReqRef><ReqRef
 Id="a44c7e61-5457-48e7-8639-df22379baaf4"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="88c1813b-c48a-405f-871e-3c4b8738d256"
>
</ReqRef><Comment>Function which will convert the input value into JRU Q_TRACTIONCUTOFFINTERFACE</Comment>
<Parameters>
<Parameter
 Type="Boolean"
 Name="TractionCutOffInKernel"
 Guid="cbb34437-d097-43f2-9f6a-8d9484b0af22"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="IsImplemented"
 Guid="fc7a380f-f0ed-47dc-8c36-1071d6b84438"
>
<PreConditions>
<PreCondition
 Guid="ea11f4f8-942e-45f8-aaaf-863a7dc508dc"
>TractionCutOffInKernel == True</PreCondition></PreConditions>
<Expression>1</Expression>
</Case><Case
 Name="NotImplemented"
 Guid="62630d7d-2494-4c98-bb33-03be9671b824"
>
<PreConditions>
<PreCondition
 Guid="8f21f068-cfe0-42f8-8931-38c3ebc16034"
>TractionCutOffInKernel == False</PreCondition></PreConditions>
<Expression>0</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="40"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SendMessage"
 Guid="7103ed8f-7a39-4de7-ab79-03790951dfe7"
>
<ReqRef
 Id="65ad388e-81c7-4318-822a-ccac8e8fd6e1"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="86dfe5b2-ea9a-49bf-b36d-42a26b83b1ff"
>
</ReqRef><ReqRef
 Id="01d4f032-ef51-4284-91f0-15bdd0f1fafe"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="655df8df-3ed7-4597-88d3-f38edaf91723"
>
</ReqRef><ReqRef
 Id="e394f9dd-0990-4f2d-ac8d-9a045f765d0a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="a5e7516d-45d2-48e2-b58d-3e99c790b189"
>
</ReqRef><Comment>Indicates whether TRAIN DATA message should be sent</Comment>
<Cases>
<Case
 Name="Train data validated"
 Guid="c8d0f7a3-1095-448f-a943-55970b3e3e4f"
>
<PreConditions>
<PreCondition
 Guid="59bf7417-acb0-457a-8af0-ffff6e9dabcb"
>DMI.MasterDMI().In_TrainData.InputInformation.DriverAnswered</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="Train data changed"
 Guid="14671651-5866-4598-b32a-f3c3359411cc"
>
<PreConditions>
<PreCondition
 Guid="2f292a1a-ef98-4ba8-b632-77b2bca1774c"
>LastTrainData != Kernel.TrainData.TrainData.Value</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="Otherwise"
 Guid="e7fdfb40-c3c7-4002-938f-f1c63ad1cbc6"
>
<Expression>False</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.MESSAGE.TRAIN_DATA.Collection5"
 Default=""
 X="260"
 Y="430"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="CreateSequence5"
 Guid="dd01aa4e-2ac4-4609-a553-5524fe7b7c6f"
>
<ReqRef
 Id="cdae853e-99ef-4221-afea-a431d90a7062"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="a9b4412c-c143-4209-8602-decf61af9cd1"
>
</ReqRef><ReqRef
 Id="53d8ce5f-17b9-4ab7-a9cf-1f35476af1ec"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="04d0b9d7-b437-4659-9693-ca5e8fdf8171"
>
</ReqRef><ReqRef
 Id="aed3787e-59d5-4500-92f0-674ad7997248"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="01307de9-8aba-47d6-87eb-89b4bdfc8fe1"
>
</ReqRef><Comment>Creates the Sequence5 according to the traction systems.</Comment>
<Cases>
<Case
 Name="Always"
 Guid="1ba36425-9a4c-4d26-b33c-3da255b8acf7"
>
<Expression>MAP Kernel.TrainData.TrainData.Value.TractionSystems 
USING tractionSystem 
IN Messages.JRU.MESSAGE.TRAIN_DATA.SubStructure5 {
     M_VOLTAGE =&gt; tractionSystem.Voltage,
     NID_CTRACTION =&gt; tractionSystem.Country 
}</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.MESSAGE.TRAIN_DATA.Collection6"
 Default=""
 X="260"
 Y="490"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="CreateSequence6"
 Guid="6d38a095-f7c1-45a4-a72a-378871a77b2b"
>
<ReqRef
 Id="01afe5d0-5e38-46a6-8884-e10f53aa1253"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="9bd14a34-0283-4c58-a4ae-5a3f32acdfad"
>
</ReqRef><ReqRef
 Id="b640d1cd-5e2f-4e98-ae46-aa5375410ac2"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="b847c260-1ad8-4130-bc03-a31a34deeb3a"
>
</ReqRef><Comment>Creates the Sequence6 according to the national system identities</Comment>
<Cases>
<Case
 Name="Always"
 Guid="1170c8ff-0d58-421c-ba8b-208bb68b4d95"
>
<Expression>MAP Kernel.TrainData.TrainData.Value.LevelsSupportedOnBoard | level.Value == LevelEnum.LNTC 
USING level 
IN Messages.JRU.MESSAGE.TRAIN_DATA.SubStructure6{
     NID_NTC =&gt; Messages.JRU.NID_NTC (
         level.NTC 
    ) 
}</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.MESSAGE.TRAIN_DATA.Collection1"
 Default=""
 X="260"
 Y="190"
 Width="100"
 Height="50"
 Name="CreateSequence1"
 Guid="4e4b511c-481d-44d3-8eb7-a683a4ed335c"
>
<ReqRef
 Id="470482d0-3a61-48ea-bca5-edd507f330f1"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="c91edaa5-ac73-41d6-9b01-3909db18ffb0"
>
</ReqRef><Comment>Creates the Sequence1 according to the brake capabilities for the Lambda trains</Comment>
<Cases>
<Case
 Name="Conversion model is used"
 Guid="5a5a45cb-70c1-4f75-bd85-3c04f8a1d99e"
>
<PreConditions>
<PreCondition
 Guid="c343ecb1-4f41-498c-b4c9-d7fe5a0304c2"
>Kernel.TrainData.BrakingParameters.ConversionModel.ConversionModelIsUsed()</PreCondition></PreConditions>
<Expression>MAP [] 
USING lambdaCapability 
IN Messages.JRU.MESSAGE.TRAIN_DATA.SubStructure1 {
     M_BRAKE_LAMBDA_CONF =&gt; 0,
     T_BRAKE_SERVICE =&gt; 0 
}</Expression>
</Case><Case
 Name="Otherwise"
 Guid="7f30afc8-c407-45ad-acdc-5596a21d01b6"
>
<Expression>[]</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.MESSAGE.TRAIN_DATA.Collection4"
 Default=""
 X="260"
 Y="250"
 Width="100"
 Height="50"
 Name="CreateSequence4"
 Guid="c4cf8260-e992-4f62-a213-c3f82ffcfc33"
>
<ReqRef
 Id="1eaa9674-4bce-4d3e-ae28-70a5e58efee3"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="6954596d-2a87-4e7f-92b6-9afa574ccaee"
>
</ReqRef><Comment>Creates the Sequence4 according to the brake capabilities for the Gamma trains</Comment>
<Cases>
<Case
 Name="Always"
 Guid="874dca44-6982-4609-9b3c-1c9a2a781eb8"
>
<Expression>CreateSubStructure2(
  BrakesConfigurationStruct{
    EddyCurrentBrakesUsed =&gt; False,
    RegenerativeBrakesUsed =&gt; False,
    MagneticShoeBrakesUsed =&gt; False 
}) +
CreateSubStructure2(
  BrakesConfigurationStruct{
    EddyCurrentBrakesUsed =&gt; True,
    RegenerativeBrakesUsed =&gt; False,
    MagneticShoeBrakesUsed =&gt; False 
}) +
CreateSubStructure2(
  BrakesConfigurationStruct{
    EddyCurrentBrakesUsed =&gt; False,
    RegenerativeBrakesUsed =&gt; True,
    MagneticShoeBrakesUsed =&gt; False 
}) +
CreateSubStructure2(
  BrakesConfigurationStruct{
    EddyCurrentBrakesUsed =&gt; True,
    RegenerativeBrakesUsed =&gt; True,
    MagneticShoeBrakesUsed =&gt; False 
}) +
CreateSubStructure2(
  BrakesConfigurationStruct{
    EddyCurrentBrakesUsed =&gt; False,
    RegenerativeBrakesUsed =&gt; False,
    MagneticShoeBrakesUsed =&gt; True 
}) +
CreateSubStructure2(
  BrakesConfigurationStruct{
    EddyCurrentBrakesUsed =&gt; True,
    RegenerativeBrakesUsed =&gt; False,
    MagneticShoeBrakesUsed =&gt; True 
}) +
CreateSubStructure2(
  BrakesConfigurationStruct{
    EddyCurrentBrakesUsed =&gt; False,
    RegenerativeBrakesUsed =&gt; True,
    MagneticShoeBrakesUsed =&gt; True 
}) +
CreateSubStructure2(
  BrakesConfigurationStruct{
    EddyCurrentBrakesUsed =&gt; True,
    RegenerativeBrakesUsed =&gt; True,
    MagneticShoeBrakesUsed =&gt; True 
})</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.MESSAGE.TRAIN_DATA.Collection2"
 Default=""
 X="480"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="CreateSequence2"
 Guid="6e0886db-e375-405f-b6af-b2b73db2a693"
>
<ReqRef
 Id="87775fe5-602e-4587-9e19-69183cf61658"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="34c347aa-6554-4c8a-917e-eabde7e09e4f"
>
</ReqRef><Comment>Creates the Sequence2 according to the emergency brake capabilities</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.EBModelSetStruct"
 Name="Model"
 Guid="aa24de87-060b-489c-a7b4-dc3d8a07dde6"
>
</Parameter><Parameter
 Type="BrakesConfigurationStruct"
 Name="Configuration"
 Guid="74be278e-e26e-4d7f-874b-5592198cabc5"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Always"
 Guid="644cea5e-b3a5-41b3-80cf-db07c14675d1"
>
<Expression>MAP [0, 1, 2, 3, 4, 5, 6] 
USING CorrectionFactor 
IN CreateSubStructure3(
    Model =&gt; Model,
    Configuration =&gt; Configuration,
    CorrectionFactor =&gt; CorrectionFactor 
)</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.MESSAGE.TRAIN_DATA.Collection3"
 Default=""
 X="260"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="CreateSequence3"
 Guid="08efa910-a400-4634-8fa8-3c8152c23354"
>
<ReqRef
 Id="6ca2081f-851e-4751-9012-480e458845de"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="9bc4a09b-fd53-44ff-970f-7b02fa936d03"
>
</ReqRef><ReqRef
 Id="bbf425ee-35fa-4076-81f6-dafb8bed41fa"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="e2c4a0d1-5e87-48bf-9adf-5e3b337dc8db"
>
</ReqRef><Comment>Creates the Sequence2 according to the service brake capabilities</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.SBModelSetStruct"
 Name="Model"
 Guid="dd04fd24-e8e9-48dd-b47d-101fd3b8a7c2"
>
</Parameter><Parameter
 Type="BrakesConfigurationStruct"
 Name="Configuration"
 Guid="3040724e-0782-4ee3-bbef-be1a1966e112"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Always"
 Guid="bc5f9568-1dcf-41da-940c-29e9cb32bf5f"
>
<Expression>MAP [0, 1, 2, 3, 4, 5, 6] 
USING CorrectionFactor 
IN CreateSubStructure4(
    Model =&gt; Model,
    Configuration =&gt; Configuration,
    CorrectionFactor =&gt; CorrectionFactor
)</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.MESSAGE.TRAIN_DATA.Collection4"
 Default=""
 X="370"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="CreateSubStructure2"
 Guid="30bc82ef-5ff3-4c96-8748-b3f0800572a2"
>
<ReqRef
 Id="470482d0-3a61-48ea-bca5-edd507f330f1"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="bd3dfdd2-ff00-4d92-87cc-305c8d0d02bb"
>
</ReqRef><ReqRef
 Id="abe0f66f-fa68-49a7-8865-94f4697926f3"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="95eaa767-816e-4223-adcc-8659eed591f1"
>
</ReqRef><ReqRef
 Id="87775fe5-602e-4587-9e19-69183cf61658"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="e911e175-26cc-4022-b729-b6bf890222e3"
>
</ReqRef><ReqRef
 Id="5626b0f1-9f44-4fed-bba1-8625f5e5bba6"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="ff4f10b3-8a4e-4778-ab3c-c4427038de3e"
>
</ReqRef><ReqRef
 Id="6ca2081f-851e-4751-9012-480e458845de"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="716543dc-13a0-4b32-82cb-0154060c1149"
>
</ReqRef><ReqRef
 Id="359b754c-597d-4321-9f37-f39af8241fe0"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="b8561f36-2aba-4f81-bbef-cb9dac58f956"
>
</ReqRef><ReqRef
 Id="bbf425ee-35fa-4076-81f6-dafb8bed41fa"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="0f0ae7f6-9982-4340-a75d-c793e574cf90"
>
</ReqRef><ReqRef
 Id="33c42d4c-ddb3-4d58-9661-7c6109e3eab5"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="9b4faeeb-02c8-456c-988a-35a0978deaa4"
>
</ReqRef><ReqRef
 Id="b81fba3b-ee5a-4f9d-95b0-1d41197814cd"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="e1882d14-b94f-4c92-af60-25b1fcc1d84d"
>
</ReqRef><ReqRef
 Id="aaf63f4f-2f5e-4b8b-8dca-5759c9c8121f"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="fc2a6817-1c1a-404e-997b-ee6ede9e8dee"
>
</ReqRef><ReqRef
 Id="2351f936-4f0c-41f2-9296-57b91a5f2328"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="74625c7d-ad62-4685-9882-208ab17f4413"
>
</ReqRef><ReqRef
 Id="f936e846-2e3d-455c-8cbf-cd0df2f386e7"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="3faea82b-ef4d-4a50-b1bf-9d18b8e122d5"
>
</ReqRef><ReqRef
 Id="7a5fd9ae-b1ba-4129-b99d-6be152864204"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="8c245aab-68c3-43e2-b99c-4825a45a67f5"
>
</ReqRef><Comment>Creates the SubStructure2 entry according to a given set of brakes configuration</Comment>
<Parameters>
<Parameter
 Type="BrakesConfigurationStruct"
 Name="Configuration"
 Guid="43cd6cf3-1fbf-4977-a084-e85dc145f300"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Brake configuration available"
 Guid="2a5ce866-1b91-432d-b69c-08d2045ab273"
>
<PreConditions>
<PreCondition
 Guid="fb29f324-c71d-4b69-b2d6-6792935c7908"
><Comment>Braking model for emergency brakes available for this brakes configuration</Comment>
Available (
     Kernel.TrainData.BrakingParameters.SelectBrakingModel(
         aModelSet =&gt; Kernel.TrainData.TrainData.Value.EBModels.ModelSet,
         aRegBrakeUsed =&gt; Configuration.RegenerativeBrakesUsed,
         aEddyCurBrakeUsed =&gt; Configuration.EddyCurrentBrakesUsed,
         aMagnBrakeUsed =&gt; Configuration.MagneticShoeBrakesUsed 
    ) 
)</PreCondition><PreCondition
 Guid="a6bd7f1d-f49b-43a2-9ae8-82990692c194"
><Comment>Braking model for service brakes available for this brakes configuration</Comment>
Available (
     Kernel.TrainData.BrakingParameters.SelectBrakingModel(
         aModelSet =&gt; Kernel.TrainData.TrainData.Value.SBModels.ModelSet,
         aRegBrakeUsed =&gt; Configuration.RegenerativeBrakesUsed,
         aEddyCurBrakeUsed =&gt; Configuration.EddyCurrentBrakesUsed,
         aMagnBrakeUsed =&gt; Configuration.MagneticShoeBrakesUsed 
    ) 
)</PreCondition></PreConditions>
<Expression>[
  Messages.JRU.MESSAGE.TRAIN_DATA.SubStructure2{
     M_BRAKE_GAMMA_CONF =&gt; BrakesConfiguration.ToMBrakeGammaConf( Configuration ),
     T_BRAKE_EMERGENCY =&gt; MessageTypes.UnResolveTime( Kernel.TrainData.BrakingParameters.T_brake_build_upValue(
         aT_brake_build_upSet =&gt; Kernel.TrainData.TrainData.Value.T_brake_emergency,
         aRegBrakeUsed =&gt; Configuration.RegenerativeBrakesUsed,
         aEddyCurBrakeUsed =&gt; Configuration.EddyCurrentBrakesUsed,
         aMagnBrakeUsed =&gt; Configuration.MagneticShoeBrakesUsed,
         aEpBrakeUsed =&gt; False 
     )),
     N_BRAKE_SECTIONS_0 =&gt; COUNT sections IN CreateSequence2(Kernel.TrainData.TrainData.Value.EBModels, Configuration),
     Sequence2 =&gt; CreateSequence2(Kernel.TrainData.TrainData.Value.EBModels, Configuration),
     T_BRAKE_SERVICE =&gt; MessageTypes.UnResolveTime ( Kernel.TrainData.BrakingParameters.T_brake_build_upValue(
         aT_brake_build_upSet =&gt; Kernel.TrainData.TrainData.Value.T_brake_service,
         aRegBrakeUsed =&gt; Configuration.RegenerativeBrakesUsed,
         aEddyCurBrakeUsed =&gt; Configuration.EddyCurrentBrakesUsed,
         aMagnBrakeUsed =&gt; Configuration.MagneticShoeBrakesUsed,
         aEpBrakeUsed =&gt; False 
     )),
     N_BRAKE_SECTIONS_1 =&gt; COUNT sections IN CreateSequence3(Kernel.TrainData.TrainData.Value.SBModels, Configuration),
     Sequence3 =&gt; CreateSequence3(Kernel.TrainData.TrainData.Value.SBModels, Configuration) 
}
]</Expression>
</Case><Case
 Name="Otherwise"
 Guid="6205f655-303b-4455-8cf3-7310685aed14"
>
<Expression>[]</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.MESSAGE.TRAIN_DATA.SubStructure3"
 Default=""
 X="590"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="CreateSubStructure3"
 Guid="edf6281e-e420-41fa-8c1d-bd5a3fc697e3"
>
<ReqRef
 Id="234e648c-50f7-48bc-b922-9664c5e29a63"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="fa512685-0aa5-4808-8cfa-820add230bda"
>
</ReqRef><ReqRef
 Id="98a105e9-8988-46ca-b688-5a06f621d178"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="58b2e3b8-8adc-4b06-a1b8-73b8fa5ea102"
>
</ReqRef><ReqRef
 Id="f8759b8c-ab43-494a-ab3b-fd8ad75afa20"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="7192d814-3431-457b-ae60-6f572805115c"
>
</ReqRef><ReqRef
 Id="0e1ac6fe-a3e6-4288-be02-6c15c5255661"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="529899c4-f401-47cc-8029-64caa098f408"
>
</ReqRef><ReqRef
 Id="83474f9f-6ba9-401e-a16e-f26a6d47a92f"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="cfebf672-a700-4e37-b7c1-2cc37c940a01"
>
</ReqRef><ReqRef
 Id="20b9c3fb-d7e0-486b-952e-57067cd9bdbb"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="e9a3e4f0-4d29-4c73-8fac-5e56c9426056"
>
</ReqRef><ReqRef
 Id="9b06cc55-c552-4058-bb4d-8213470858af"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="f21aed66-833e-46b8-9ad1-0adc1393b0ae"
>
</ReqRef><ReqRef
 Id="9d7c4429-39d5-4553-9c3e-37031ef87f91"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="a5c3b1a1-7e2b-4bea-bba2-d8d0f2faf122"
>
</ReqRef><ReqRef
 Id="09e11638-da64-4247-8ca4-2fa73f09c5e2"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="821d66b4-a887-49a2-b11b-0e32063b8f8a"
>
</ReqRef><ReqRef
 Id="0db14814-3e55-4bcd-b292-77b9db6ee18d"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="b7217e05-0553-444a-9bbd-8624ebe802e2"
>
</ReqRef><ReqRef
 Id="a26a0f01-43c7-4e11-9bbc-8d4f4955a138"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="3af3c793-8299-4bcf-b34f-ba805255f7c4"
>
</ReqRef><ReqRef
 Id="62ed59f4-bcd1-4025-8f76-76dfc9f72cc7"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="f8569d1f-9c64-4637-80ae-9f54adebc5b1"
>
</ReqRef><ReqRef
 Id="d2c9b51e-dfb6-4600-b3d0-1826348e4e0a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="548b6265-25e4-4204-9f91-504993c1937e"
>
</ReqRef><ReqRef
 Id="bb2c130f-7f70-4649-b205-43d79cc935e4"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="8719809b-d604-470b-a455-8b0a7bbf9126"
>
</ReqRef><ReqRef
 Id="0f2dbd96-6593-410e-aae8-fe8482274d06"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="7c32c302-6f42-49b7-8241-d7b83b2ee036"
>
</ReqRef><ReqRef
 Id="025a1d1f-c481-4f16-8bd5-8b1970e3de5a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="083579f1-7d57-4d1a-9460-b7d48229909b"
>
</ReqRef><ReqRef
 Id="91b5dc43-9b11-414a-b9b3-850841e86fed"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="7fa9725e-52c9-4013-a5c0-998df1405ae4"
>
</ReqRef><Comment>Creates the braking model for emergency brakes</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.EBModelSetStruct"
 Name="Model"
 Guid="559c32a7-0785-490f-93e0-9d6bd887eae0"
>
</Parameter><Parameter
 Type="BrakesConfigurationStruct"
 Name="Configuration"
 Guid="7869c815-6f98-4b75-8836-86edda1caed9"
>
</Parameter><Parameter
 Type="Integer"
 Name="CorrectionFactor"
 Guid="a7fd1b33-8898-4b06-8849-1c2f5be4cfa0"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Always"
 Guid="968a3951-8974-4352-92c3-e501027b3791"
>
<Expression>LET BrakingValue &lt;- Kernel.TrainData.BrakingParameters.SelectBrakingModelValue(
     BrakingModel =&gt; Kernel.TrainData.BrakingParameters.SelectBrakingModel(
         aModelSet =&gt; Model.ModelSet,
         aRegBrakeUsed =&gt; Configuration.RegenerativeBrakesUsed,
         aEddyCurBrakeUsed =&gt; Configuration.EddyCurrentBrakesUsed,
         aMagnBrakeUsed =&gt; Configuration.MagneticShoeBrakesUsed 
    ),
     CorrFactor =&gt; CorrectionFactor 
) 
IN
LET KDry &lt;- Kernel.TrainData.BrakingParameters.SelectKdryValue(
    aKdrySet =&gt; Model.Kdry_rstValuesSet,
    aRegBrakeUsed =&gt; Configuration.RegenerativeBrakesUsed,
    aEddyCurBrakeUsed =&gt; Configuration.EddyCurrentBrakesUsed,
    aMagnBrakeUsed =&gt; Configuration.MagneticShoeBrakesUsed
)
IN
LET KWet &lt;- Kernel.TrainData.BrakingParameters.SelectKwetValue(
    aKwetSet =&gt; Model.Kwet_rstValuesSet,
    aRegBrakeUsed =&gt; Configuration.RegenerativeBrakesUsed,
    aEddyCurBrakeUsed =&gt; Configuration.EddyCurrentBrakesUsed,
    aMagnBrakeUsed =&gt; Configuration.MagneticShoeBrakesUsed
)
IN
Messages.JRU.MESSAGE.TRAIN_DATA.SubStructure3{
     V_BRAKE_EMERGENCY_COMP =&gt; MessageTypes.UnResolveSpeed(BrakingValue.SpeedStep, 5.0 ),
     A_BRAKE_EMERGENCY_COMP =&gt; MessageTypes.UnResolveAcceleration(BrakingValue.Acceleration, 5.0),
     M_KDRY_RST_50 =&gt; ToM_KDRY_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KDry.Cl__50, CorrectionFactor)),
     M_KDRY_RST_90 =&gt; ToM_KDRY_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KDry.Cl__90, CorrectionFactor)),
     M_KDRY_RST_99 =&gt; ToM_KDRY_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KDry.Cl__99, CorrectionFactor)),
     M_KDRY_RST_99_9 =&gt; ToM_KDRY_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KDry.Cl__99_9, CorrectionFactor)),
     M_KDRY_RST_99_99 =&gt; ToM_KDRY_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KDry.Cl__99_99, CorrectionFactor)),
     M_KDRY_RST_99_999 =&gt; ToM_KDRY_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KDry.Cl__99_999, CorrectionFactor)),
     M_KDRY_RST_99_9999 =&gt; ToM_KDRY_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KDry.Cl__99_9999, CorrectionFactor)),
     M_KDRY_RST_99_99999 =&gt; ToM_KDRY_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KDry.Cl__99_99999, CorrectionFactor)),
     M_KDRY_RST_99_999999 =&gt; ToM_KDRY_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KDry.Cl__99_999999, CorrectionFactor)),
     M_KDRY_RST_99_9999999 =&gt; ToM_KDRY_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KDry.Cl__99_9999999, CorrectionFactor)),
     M_KWET_RST =&gt; ToM_KWET_RST( Kernel.TrainData.BrakingParameters.SelectCorrectionFactor(KWet, CorrectionFactor)) 
}</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.MESSAGE.TRAIN_DATA.SubStructure4"
 Default=""
 X="370"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="CreateSubStructure4"
 Guid="48e5f32a-d2a5-4110-bd7d-af6e6f075bc0"
>
<ReqRef
 Id="e1bf9b64-ccf9-49ca-a29a-09da0c7e96ff"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="382d2d74-191c-4b46-a798-e8ba2622a075"
>
</ReqRef><ReqRef
 Id="53bdd381-2771-4b60-8f15-a77775302e06"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="9d7c65c3-4a1a-4a49-ac2e-2dc137db45ae"
>
</ReqRef><ReqRef
 Id="7e5f5b95-e177-4917-a71a-f40a403e0cb6"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="37243bd0-29bf-47cb-92c4-07d6d001476b"
>
</ReqRef><ReqRef
 Id="4e167f10-ee4e-4ae4-a5ae-4e875f46c1d7"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="6cb19dfd-3d5f-4787-bbfb-66c643c0a060"
>
</ReqRef><Comment>Creates the braking model for service brakes</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.SBModelSetStruct"
 Name="Model"
 Guid="4b91729d-d1ad-401e-9c88-cd247b09d5c5"
>
</Parameter><Parameter
 Type="BrakesConfigurationStruct"
 Name="Configuration"
 Guid="fb8b74de-aef0-4297-b68f-be4b3752a0ab"
>
</Parameter><Parameter
 Type="Integer"
 Name="CorrectionFactor"
 Guid="73898975-0fbc-4669-a914-e8b07bcf7fa9"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Case1"
 Guid="26f60656-6d95-4d74-8895-41903b0951c4"
>
<Expression>LET BrakingValue &lt;- Kernel.TrainData.BrakingParameters.SelectBrakingModelValue(
     BrakingModel =&gt; Kernel.TrainData.BrakingParameters.SelectBrakingModel(
         aModelSet =&gt; Model.ModelSet,
         aRegBrakeUsed =&gt; Configuration.RegenerativeBrakesUsed,
         aEddyCurBrakeUsed =&gt; Configuration.EddyCurrentBrakesUsed,
         aMagnBrakeUsed =&gt; Configuration.MagneticShoeBrakesUsed 
    ),
     CorrFactor =&gt; CorrectionFactor 
) 
IN 
Messages.JRU.MESSAGE.TRAIN_DATA.SubStructure4 {
     V_BRAKE_SERVICE_COMP =&gt; MessageTypes.UnResolveSpeed(BrakingValue.SpeedStep, 5.0),
     A_BRAKE_SERVICE_COMP =&gt; MessageTypes.UnResolveAcceleration(BrakingValue.Acceleration, 5.0) 
}</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_KDRY_RST"
 Default=""
 X="700"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ToM_KDRY_RST"
 Guid="45ac53b2-9bfb-4b46-b2c0-02d8dfb5e6d2"
>
<ReqRef
 Id="025a1d1f-c481-4f16-8bd5-8b1970e3de5a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="22e46829-8abf-4c63-9f54-44556783750e"
>
</ReqRef><Comment>Converts the correction factor on dry rails</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.CorrectionFactor"
 Name="CorrFactor"
 Guid="f4dbc9bc-dd49-4318-bcef-da2eb7c4d7d6"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Always"
 Guid="67b1f7b0-4c13-4ccc-abb6-591392007ad8"
>
<Expression>Messages.JRU.M_KDRY_RST ( CorrFactor / 0.05 )</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.JRU.M_KWET_RST"
 Default=""
 X="700"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ToM_KWET_RST"
 Guid="f445e440-7918-4c4c-8f20-72ca3bf6eb37"
>
<ReqRef
 Id="91b5dc43-9b11-414a-b9b3-850841e86fed"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="1be45dc7-2dc6-4c00-b333-0a8ab623bac4"
>
</ReqRef><Comment>Converts the correction factor on wet rails</Comment>
<Parameters>
<Parameter
 Type="Kernel.TrainData.BrakingParameters.CorrectionFactor"
 Name="CorrFactor"
 Guid="1a304910-f296-4c4a-8840-d5e4d7821aff"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Always"
 Guid="643fc9ad-35b6-46ac-8460-bb3e6739ff35"
>
<Expression>Messages.JRU.M_KWET_RST ( CorrFactor / 0.05 )</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="40"
 Y="520"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="UpdateLastValues"
 Guid="500c293a-306f-4baf-89d7-c68df9889bbf"
>
<ReqRef
 Id="01d4f032-ef51-4284-91f0-15bdd0f1fafe"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="e8a6bf52-16a3-44c5-822f-62957026ea80"
>
</ReqRef><Comment>Updates the registered values</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update registered values"
 Guid="1a2f9851-5e41-4b10-a786-fb26a9069cfb"
>
<Comment>Updates the registered values</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Update registered values"
 Guid="ab86dd62-e838-4e4f-9049-5ac87f9a94d6"
>
<PreConditions>
<PreCondition
 Guid="b4ae5286-d008-45f5-9164-95f7c7a53440"
>SendMessage()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="104a29f9-02f1-4e98-a6ad-3395e6f130b9"
>LastTrainData &lt;- Kernel.TrainData.TrainData.Value</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="40"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FillData"
 Guid="e65bedac-50ac-4a5b-a776-77c71ab8a4e8"
>
<ReqRef
 Id="8623ab63-7b21-4ea0-8ae5-1f6cbb90a9b5"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="d5926cfb-2f20-4808-abd4-54bd3073f0dd"
>
</ReqRef><ReqRef
 Id="3548e812-7c69-44d2-be6e-4d9d79170728"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="e06cd1a0-d844-4113-8c4a-5aa921c4b863"
>
</ReqRef><Comment>Creates a new TRAIN_DATA  message, if required</Comment>
<Rules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Send TRAIN_DATA  message"
 Guid="623926d9-669b-4777-8a4b-e064456be9ff"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Send TRAIN_DATA message"
 Guid="f7a4c837-9fbe-40b2-8c4b-3ccc45b10464"
>
<PreConditions>
<PreCondition
 Guid="2d3ce689-b21c-4562-8ea2-95d062f00d1e"
>SendMessage()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="deb494e9-6a56-46ac-805f-11f4df395bd4"
>INSERT Messages.JRU.MESSAGE.Message {
     TRAIN_DATA =&gt; CreateMessage() 
} IN Messages</Action><Action
 Guid="fb97fc7c-2c68-4eb3-a9cf-9e16efecdde4"
>UpdateLastValues()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="Kernel.TrainData.TrainDataValuesStruct"
 DefaultValue="Kernel.TrainData.TrainDataValuesStruct{}"
 VariableMode="Internal"
 X="40"
 Y="410"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="LastTrainData"
 Guid="48aaabe9-5ac8-4fc4-a4da-465803fceda0"
>
<ReqRef
 Id="01d4f032-ef51-4284-91f0-15bdd0f1fafe"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="ec4c60c5-1fa1-48e7-af99-0855d17a0c18"
>
</ReqRef><Comment>The last reported status</Comment>
</Variable></Variables>
</NameSpace>
