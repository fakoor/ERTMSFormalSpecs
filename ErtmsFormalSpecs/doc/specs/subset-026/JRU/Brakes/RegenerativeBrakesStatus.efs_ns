<NameSpace
 X="210"
 Y="20"
 Width="100"
 Height="50"
 Name="RegenerativeBrakesStatus"
 Guid="d84e0e6e-9e19-4efb-8006-57446ea1af63"
>
<Comment>Definition of the JRU message &quot;REGENERATIVE BRAKE STATUS&quot;, and functions to fetch all the information needed for this message.</Comment>
<NameSpaces>
</NameSpaces>
<Functions>
<Function
 Type="Messages.JRU.M_RB_STATUS"
 Default=""
 X="150"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="GetStatus"
 Guid="b802e62d-1f7c-4434-8e56-ae456c0a96e5"
>
<ReqRef
 Id="de020c80-db0c-45db-855e-ae27cffc7437"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="3f07757f-58cc-43cc-b2c5-4d569319914f"
>
</ReqRef><Comment>Retrieved the REGENERATIVE_BRAKE status from the TIU</Comment>
<Cases>
<Case
 Name="Active"
 Guid="b9179eb4-8f5e-4e3f-828b-49c142149569"
>
<PreConditions>
<PreCondition
 Guid="46aa8461-c646-41a6-8f03-5997a7f2e9ab"
>TIU.SpecialBrakeStatus.RegenerativeBrakeIsActive == True</PreCondition></PreConditions>
<Expression>Messages.JRU.M_RB_STATUS.Active</Expression>
</Case><Case
 Name="NotActive"
 Guid="11c613a3-adc6-42a5-a33f-b5ecc0936760"
>
<Expression>Messages.JRU.M_RB_STATUS.Not_active</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="40"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SendMessage"
 Guid="7c497b9d-e45b-4ab4-967b-a0badb0ff8f4"
>
<ReqRef
 Id="5373d260-e440-4af0-a97e-0195115ecf5a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="538074ba-d307-4d54-8526-89965b347f1c"
>
</ReqRef><ReqRef
 Id="e394f9dd-0990-4f2d-ac8d-9a045f765d0a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="15706269-9bee-4441-bf1d-edb539cc3daf"
>
</ReqRef><Comment>Indicates whether the REGENERATIVE_BRAKE_STATUS JRU Message should be sent</Comment>
<Cases>
<Case
 Name="AtStartUp"
 Guid="a79b4ab9-75a0-4d9e-b4f4-950da81fa1a0"
>
<PreConditions>
<PreCondition
 Guid="6bdfde5b-f0b8-4326-a535-44e469344d50"
>IsStartUp()</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="StatusChanged"
 Guid="126a24bd-89e5-45b6-a838-a9cd7ae57865"
>
<Expression>LastStatus != GetStatus()</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="40"
 Y="330"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="UpdateLastValues"
 Guid="e9f0ca6d-d390-4678-93f9-d09aa2a34062"
>
<ReqRef
 Id="5373d260-e440-4af0-a97e-0195115ecf5a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="23b7b951-9e86-4632-a4cd-ffce628859cf"
>
</ReqRef><Comment>Updates the registered values</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update registered values"
 Guid="a02ebfe8-26d0-47bf-b713-c8824846f394"
>
<Comment>Updates the registered values</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Update registered values"
 Guid="a6734075-689e-4c7b-9a06-9f2904d93fa4"
>
<PreConditions>
<PreCondition
 Guid="3869622f-11da-4ed3-bea6-efde0e431a75"
>SendMessage()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="219aed81-3634-4b1e-a5cd-d40b78d7b861"
>LastStatus &lt;- GetStatus()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="40"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FillData"
 Guid="7a356695-0e0e-40d5-81d3-e2bfeaaa31e6"
>
<ReqRef
 Id="cc8b6072-8727-4c6b-98d3-e4f416c8efcc"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="905add45-b59b-47fb-b12b-8f2f2f99b81f"
>
</ReqRef><ReqRef
 Id="b6d08d04-d824-4a22-8f42-9ae1576ee296"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="93f40bc1-fad8-4e32-bebd-796f54236905"
>
</ReqRef><ReqRef
 Id="de020c80-db0c-45db-855e-ae27cffc7437"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="ee10a116-42c3-4790-9101-76a6ee339b28"
>
</ReqRef><ReqRef
 Id="1c12e165-9023-45d1-981c-be366fbec613"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="0d41cf83-f1ef-4fb2-a86f-f44b11bf9772"
>
</ReqRef><Comment>Creates a new REGENERATIVE_BRAKE_STATUS message, if required</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Send REGENERATIVE_BRAKE_STATUS message"
 Guid="bd22f507-8f9a-4d22-a293-effd5ca31aee"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Send REGENERATIVE_BRAKE_STATUS message"
 Guid="b4351f72-cf77-4a68-b336-5dec898eb9ea"
>
<PreConditions>
<PreCondition
 Guid="d9876a95-e003-4890-8408-e4890ebee783"
>SendMessage()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d1c32ea3-8ae2-4304-9abb-eaefe3134d0a"
>INSERT Messages.JRU.MESSAGE.Message{
     REGENERATIVE_BRAKE_STATUS =&gt; Messages.JRU.MESSAGE.REGENERATIVE_BRAKE_STATUS.Message{
         HEADER =&gt; JRU.Header.CreateHeader(33),
         M_RB_STATUS =&gt; GetStatus() 
    } 
}IN Messages</Action><Action
 Guid="23e78b6f-fa36-417e-a305-4289c8ba2481"
>UpdateLastValues()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="Messages.JRU.M_RB_STATUS"
 DefaultValue="Messages.JRU.M_RB_STATUS.Not_active"
 VariableMode="Internal"
 X="40"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="LastStatus"
 Guid="68afc227-0d65-4ca6-bae1-4ce735705f45"
>
<ReqRef
 Id="5373d260-e440-4af0-a97e-0195115ecf5a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="d7f7bb1c-abed-4954-9137-f0ae2def01fd"
>
</ReqRef><Comment>The last reported status</Comment>
</Variable></Variables>
</NameSpace>
