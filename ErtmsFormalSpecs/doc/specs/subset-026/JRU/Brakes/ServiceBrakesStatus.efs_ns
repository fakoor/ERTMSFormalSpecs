<NameSpace
 X="40"
 Y="80"
 Width="100"
 Height="50"
 Name="ServiceBrakesStatus"
 Guid="06a6799a-0f38-4a9d-a7c3-eefb3ae2b6ad"
>
<NameSpaces>
</NameSpaces>
<Functions>
<Function
 Type="Messages.JRU.M_BRAKE_COMMAND_STATE"
 Default=""
 X="150"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="GetStatus"
 Guid="bcdc94d9-fb0b-422b-80f3-ed90e775aefb"
>
<ReqRef
 Id="cb3458d8-a8bd-47d7-b410-3cd6789a56cd"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="e4c22620-a59d-4b86-95be-478f42744323"
>
</ReqRef><Comment>Retrieves the SB_COMMAND status from the TIU</Comment>
<Cases>
<Case
 Name="Applied"
 Guid="1dbb26cd-86b5-4755-8fe8-922a7ef1a2cb"
>
<PreConditions>
<PreCondition
 Guid="2e282d4e-3550-4590-95ae-a1523f5b3953"
>TIU.Brakes.ServiceBrakes.Commanded()</PreCondition></PreConditions>
<Expression>Messages.JRU.M_BRAKE_COMMAND_STATE.Commanded</Expression>
</Case><Case
 Name="NotApplied"
 Guid="8660e02a-2ace-45fa-9cbf-3b668afaed8f"
>
<Expression>Messages.JRU.M_BRAKE_COMMAND_STATE.Not_commanded</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="40"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SendMessage"
 Guid="19ea6022-b75d-452c-9a0e-a06736cf8fcc"
>
<ReqRef
 Id="e394f9dd-0990-4f2d-ac8d-9a045f765d0a"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="2a815504-fd02-46d4-b626-ebcfac33902e"
>
</ReqRef><ReqRef
 Id="089434c4-9c48-438a-9c6e-1dc3af77e9db"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="2d2e3e74-5e6b-4bc9-8aa5-b026977e5ac6"
>
</ReqRef><Comment>Indicates whether the SB_BRAKE_STATUS should be reported in the JRU</Comment>
<Cases>
<Case
 Name="ServiceBrakeHasBeenApplied"
 Guid="354e3a1d-84d2-4e2a-8198-fb61a798b563"
>
<Expression>LastStatus !=  GetStatus()</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="40"
 Y="330"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="UpdateLastValues"
 Guid="4e597af2-ec27-48d1-bb23-9f4a98a2a7fd"
>
<ReqRef
 Id="089434c4-9c48-438a-9c6e-1dc3af77e9db"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="579e1086-9f8d-4d0b-a801-a13ae66cc9de"
>
</ReqRef><Comment>Updates the registered values</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update registered values"
 Guid="df838c63-ea07-4f5a-a65d-a7ff887ea3be"
>
<Comment>Updates the registered values</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Update registered values"
 Guid="55602208-8bd8-41b5-a795-ba08ebf6400e"
>
<PreConditions>
<PreCondition
 Guid="da5470b8-c104-4c93-ab32-72c2f889bfe9"
>SendMessage()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d762199d-0486-4394-87e0-5a172bc37b65"
>LastStatus &lt;- GetStatus()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="40"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FillData"
 Guid="0143822c-2b70-4e3a-8958-7821b109ffdf"
>
<ReqRef
 Id="a8f59a9b-a318-44ce-8106-9abe073a59bf"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="55ce6fad-1938-424d-bc57-b7694126ed1a"
>
</ReqRef><ReqRef
 Id="cb3458d8-a8bd-47d7-b410-3cd6789a56cd"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="34eba910-242f-4f83-8e3f-d82a7a9c94a9"
>
</ReqRef><ReqRef
 Id="a12a618a-7473-4e20-8fec-78804b7db646"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="8969adcc-64cb-4c95-be38-9fbacb6743c2"
>
</ReqRef><Comment>Creates a new SERVICE_BRAKE_COMMAND_STATE message, if required</Comment>
<Rules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Send SERVICE_BRAKE_COMMAND_STATE message"
 Guid="e8ba3004-d7be-479e-bfe2-77620cf88d71"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Send SERVICE_BRAKE_COMMAND_STATE message"
 Guid="8559297c-e52d-4c4b-9df1-4e831c674c3d"
>
<PreConditions>
<PreCondition
 Guid="067df3e1-9a67-4be8-9b59-3a6dc9601bd8"
>SendMessage()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0dca06bd-3e0a-4fc5-a988-d9e12c9fdc01"
>INSERT Messages.JRU.MESSAGE.Message {
     SERVICE_BRAKE_COMMAND_STATE =&gt; Messages.JRU.MESSAGE.SERVICE_BRAKE_COMMAND_STATE.Message{
         HEADER =&gt; Header.CreateHeader(4),
         M_BRAKE_COMMAND_STATE=&gt;GetStatus() 
    } 
} IN Messages</Action><Action
 Guid="0c00ba00-28c2-4884-a915-810229afdfa7"
>UpdateLastValues()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="Messages.JRU.M_BRAKE_COMMAND_STATE"
 DefaultValue="Messages.JRU.M_BRAKE_COMMAND_STATE.Not_commanded"
 VariableMode="Internal"
 X="40"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="LastStatus"
 Guid="205a2e92-d8f4-4ed0-9a43-2eccca7288b1"
>
<ReqRef
 Id="089434c4-9c48-438a-9c6e-1dc3af77e9db"
 SpecId="2218d057-3a1a-45e0-a1c9-ef26c3f85bc2"
 Guid="fc3a85b6-1532-490c-97b2-0a323d148adb"
>
</ReqRef><Comment>The last reported status</Comment>
</Variable></Variables>
</NameSpace>
